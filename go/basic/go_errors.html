<html lang="zh-CN"><head><style>
          .fellou-floating-ball {
              position: fixed;
              bottom: 20px;
              right: 20px;
              background: #fff;
              border-radius: 50%;
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
              display: flex;
              gap: 8px;
              flex-direction: row;
              align-items: center;
              justify-content: center;
              cursor: pointer;
              transition: all 0.15s ease;
              z-index: 100000;
              width: 28px;
              height: 28px;
              text-align: center;
              border: 2px solid #f4f4f4;
          }

          .fellou-floating-ball:hover {
              width: 140px;
              border-radius: 99px;
          }

          .fellou-floating-ball svg {
              width: 16px;
              height: 16px;
          }

          .fellou-floating-ball-text {
              display: none;
              width: 0px;
              transition: width 0.3s ease;
              color: #595561;
              font-size: 12px;
              font-style: normal;
              font-weight: 400;
              line-height: 20px;
              white-space: nowrap;
              overflow: hidden;
           
          }

          .fellou-floating-ball:hover .fellou-floating-ball-text {
              display: block;
              width: 100px;
          }
      </style></head><body>
            


    <meta charset="UTF-8" data-doubao-translate-traverse-mark="1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" data-doubao-translate-traverse-mark="1">
    <title data-doubao-translate-traverse-mark="1">Go è¯­è¨€ Errors é”™è¯¯å¤„ç† - æ·±å…¥æµ…å‡ºæƒå¨æŒ‡å—</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" data-doubao-translate-traverse-mark="1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" data-doubao-translate-traverse-mark="1"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js" data-doubao-translate-traverse-mark="1"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet" data-doubao-translate-traverse-mark="1">
    <style data-doubao-translate-traverse-mark="1">
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #00ADD8;
            --secondary-color: #5DC9E2;
            --accent-color: #CE3262;
            --dark-bg: #0d1117;
            --card-bg: #161b22;
            --border-color: #30363d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --code-bg: #1a1f2e;
            --success-color: #3fb950;
            --warning-color: #d29922;
            --gradient-start: #00ADD8;
            --gradient-end: #5DC9E2;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0d1117 0%, #1a1f2e 100%);
            color: var(--text-primary);
            line-height: 1.8;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
            padding: 3rem 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 173, 216, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .header .subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
        }

        .container {
            display: flex;
            max-width: 1600px;
            margin: 0 auto;
            min-height: calc(100vh - 200px);
        }

        .sidebar {
            width: 300px;
            background: var(--card-bg);
            padding: 2rem 1.5rem;
            position: sticky;
            top: 160px;
            height: fit-content;
            max-height: calc(100vh - 180px);
            overflow-y: auto;
            border-right: 1px solid var(--border-color);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: var(--dark-bg);
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 3px;
        }

        .sidebar h3 {
            color: var(--primary-color);
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .toc {
            list-style: none;
        }

        .toc li {
            margin-bottom: 0.8rem;
        }

        .toc a {
            color: var(--text-secondary);
            text-decoration: none;
            display: block;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .toc a:hover {
            background: rgba(0, 173, 216, 0.1);
            color: var(--primary-color);
            transform: translateX(5px);
        }

        .toc a.active {
            background: linear-gradient(90deg, rgba(0, 173, 216, 0.2) 0%, transparent 100%);
            color: var(--primary-color);
            border-left: 3px solid var(--primary-color);
            font-weight: 600;
        }

        .content {
            flex: 1;
            padding: 3rem;
            max-width: 1100px;
        }

        .section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 3rem;
            margin-bottom: 3rem;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section h2::before {
            content: '';
            width: 8px;
            height: 40px;
            background: linear-gradient(180deg, var(--gradient-start), var(--gradient-end));
            border-radius: 4px;
        }

        .section h3 {
            color: var(--secondary-color);
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .section h3::before {
            content: 'â–¸';
            color: var(--secondary-color);
            font-size: 1.2rem;
        }

        .section h4 {
            color: var(--text-primary);
            font-size: 1.2rem;
            margin: 1.5rem 0 1rem;
            font-weight: 600;
        }

        .section p {
            margin-bottom: 1.2rem;
            color: var(--text-secondary);
            line-height: 1.9;
        }

        .highlight-box {
            background: linear-gradient(135deg, rgba(0, 173, 216, 0.1) 0%, rgba(93, 201, 226, 0.05) 100%);
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .highlight-box strong {
            color: var(--primary-color);
        }

        .warning-box {
            background: linear-gradient(135deg, rgba(206, 50, 98, 0.1) 0%, rgba(206, 50, 98, 0.05) 100%);
            border-left: 4px solid var(--accent-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .warning-box strong {
            color: var(--accent-color);
        }

        .success-box {
            background: linear-gradient(135deg, rgba(63, 185, 80, 0.1) 0%, rgba(63, 185, 80, 0.05) 100%);
            border-left: 4px solid var(--success-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }

        .success-box strong {
            color: var(--success-color);
        }

        pre {
            background: var(--code-bg);
            border-radius: 10px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        pre code {
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        code {
            background: var(--code-bg);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.88rem;
            color: var(--secondary-color);
        }

        pre code {
            background: none;
            padding: 0;
        }

        ul, ol {
            margin: 1.5rem 0;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.8rem;
            color: var(--text-secondary);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: var(--dark-bg);
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table th {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-table tr:hover {
            background: rgba(0, 173, 216, 0.05);
        }

        .tag {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .tag-go113 {
            background: rgba(0, 173, 216, 0.2);
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .tag-best-practice {
            background: rgba(63, 185, 80, 0.2);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .tag-warning {
            background: rgba(206, 50, 98, 0.2);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: var(--dark-bg);
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 173, 216, 0.2);
            border-color: var(--primary-color);
        }

        .feature-card h4 {
            color: var(--primary-color);
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }

        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 173, 216, 0.4);
            z-index: 1000;
        }

        .back-to-top.visible {
            opacity: 1;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 30px rgba(0, 173, 216, 0.6);
        }

        @media (max-width: 1024px) {
            .sidebar {
                display: none;
            }

            .content {
                padding: 2rem 1.5rem;
            }

            .section {
                padding: 2rem 1.5rem;
            }

            .header h1 {
                font-size: 2rem;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 2rem 1rem;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .content {
                padding: 1.5rem 1rem;
            }

            .section {
                padding: 1.5rem 1rem;
            }

            .section h2 {
                font-size: 1.5rem;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        .code-header {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 10px 10px 0 0;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: -1.5rem;
            margin-top: 1.5rem;
        }

        .code-block {
            margin-top: 0;
        }
    </style>


    <div class="header" data-doubao-translate-traverse-mark="1">
        <h1 data-doubao-translate-traverse-mark="1">ğŸš€ Go è¯­è¨€ Errors é”™è¯¯å¤„ç†</h1>
        <p class="subtitle" data-doubao-translate-traverse-mark="1">æ·±å…¥æµ…å‡ºæƒå¨æŒ‡å— - ä»åŸºç¡€åˆ°è¿›é˜¶çš„å®Œæ•´å­¦ä¹ è·¯å¾„</p>
    </div>

    <div class="container" data-doubao-translate-traverse-mark="1">
        <nav class="sidebar" data-doubao-translate-traverse-mark="1">
            <h3 data-doubao-translate-traverse-mark="1">ğŸ“š ç›®å½•å¯¼èˆª</h3>
            <ul class="toc" data-doubao-translate-traverse-mark="1">
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter1" data-doubao-translate-traverse-mark="1">ç¬¬ä¸€ç« ï¼šé”™è¯¯å¤„ç†åŸºç¡€</a></li>
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter2" data-doubao-translate-traverse-mark="1">ç¬¬äºŒç« ï¼šé”™è¯¯åˆ¤æ–­ä¸ç±»å‹æ–­è¨€</a></li>
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter3" data-doubao-translate-traverse-mark="1">ç¬¬ä¸‰ç« ï¼šé”™è¯¯åŒ…è£…ä¸é”™è¯¯é“¾</a></li>
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter4" data-doubao-translate-traverse-mark="1">ç¬¬å››ç« ï¼šè‡ªå®šä¹‰é”™è¯¯ç±»å‹</a></li>
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter5" data-doubao-translate-traverse-mark="1">ç¬¬äº”ç« ï¼šé”™è¯¯å¤„ç†æ¨¡å¼</a></li>
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter6" data-doubao-translate-traverse-mark="1">ç¬¬å…­ç« ï¼šGo 1.13+ æ–°ç‰¹æ€§</a></li>
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter7" data-doubao-translate-traverse-mark="1">ç¬¬ä¸ƒç« ï¼šé”™è¯¯å¤„ç†æœ€ä½³å®è·µ</a></li>
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter8" data-doubao-translate-traverse-mark="1">ç¬¬å…«ç« ï¼šå¸¸è§é—®é¢˜ä¸é™·é˜±</a></li>
                <li data-doubao-translate-traverse-mark="1"><a href="#chapter9" data-doubao-translate-traverse-mark="1">ç¬¬ä¹ç« ï¼šå®æˆ˜æ¡ˆä¾‹åˆ†æ</a></li>
            </ul>
        </nav>

        <main class="content" data-doubao-translate-traverse-mark="1">
            <!-- ç¬¬ä¸€ç« ï¼šé”™è¯¯å¤„ç†åŸºç¡€ -->
            <section id="chapter1" class="section" data-doubao-translate-traverse-mark="1">
                <h2 data-doubao-translate-traverse-mark="1">ç¬¬ä¸€ç« ï¼šGo é”™è¯¯å¤„ç†åŸºç¡€</h2>

                <h3 data-doubao-translate-traverse-mark="1">1.1 error æ¥å£çš„è®¾è®¡ç†å¿µ</h3>
                <p data-doubao-translate-traverse-mark="1">Go è¯­è¨€é‡‡ç”¨äº†ç‹¬ç‰¹çš„é”™è¯¯å¤„ç†å“²å­¦ï¼š"<strong>Errors are values</strong>"ï¼ˆé”™è¯¯å³å€¼ï¼‰ã€‚ä¸è®¸å¤šè¯­è¨€ä½¿ç”¨å¼‚å¸¸æœºåˆ¶ä¸åŒï¼ŒGo å°†é”™è¯¯ä½œä¸ºæ™®é€šçš„è¿”å›å€¼å¤„ç†ã€‚</p>

                <div class="highlight-box" data-doubao-translate-traverse-mark="1">
                    <strong>æ ¸å¿ƒç†å¿µï¼š</strong> Go è¯­è¨€è®¤ä¸ºé”™è¯¯æ˜¯ç¨‹åºæ­£å¸¸æµç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œåº”è¯¥è¢«æ˜¾å¼å¤„ç†ï¼Œè€Œä¸æ˜¯é€šè¿‡å¼‚å¸¸æœºåˆ¶éšå¼ä¼ æ’­ã€‚è¿™ç§è®¾è®¡é¼“åŠ±å¼€å‘è€…åœ¨æ¯ä¸ªå¯èƒ½å‡ºé”™çš„åœ°æ–¹éƒ½è®¤çœŸæ€è€ƒå¦‚ä½•å¤„ç†é”™è¯¯ã€‚
                </div>

                <h4 data-doubao-translate-traverse-mark="1">error æ¥å£å®šä¹‰</h4>
                <p data-doubao-translate-traverse-mark="1">Go çš„ error æ˜¯ä¸€ä¸ªå†…ç½®æ¥å£ï¼Œå®šä¹‰æå…¶ç®€æ´ï¼š</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">Go æºç  - error æ¥å£å®šä¹‰</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">// builtin/builtin.go
type error interface {
    Error() string
}</code></pre>

                <p data-doubao-translate-traverse-mark="1">ä»»ä½•å®ç°äº† <code>Error() string</code> æ–¹æ³•çš„ç±»å‹éƒ½å¯ä»¥ä½œä¸º error ä½¿ç”¨ã€‚è¿™ç§ç®€æ´çš„è®¾è®¡ç»™äº†å¼€å‘è€…æå¤§çš„çµæ´»æ€§ã€‚</p>

                <h3 data-doubao-translate-traverse-mark="1">1.2 åˆ›å»ºç®€å•é”™è¯¯ï¼šerrors.New</h3>
                <p data-doubao-translate-traverse-mark="1"><code>errors.New</code> æ˜¯åˆ›å»ºé”™è¯¯æœ€ç®€å•çš„æ–¹å¼ï¼Œé€‚ç”¨äºåˆ›å»ºé™æ€é”™è¯¯æ¶ˆæ¯ã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">errors.New åº•å±‚å®ç°</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">// errors/errors.go
package errors

// errorString æ˜¯ä¸€ä¸ªç®€å•çš„é”™è¯¯å®ç°
type errorString struct {
    s string
}

// Error æ–¹æ³•å®ç° error æ¥å£
func (e *errorString) Error() string {
    return e.s
}

// New è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–ä¸ºç»™å®šæ–‡æœ¬çš„é”™è¯¯
func New(text string) error {
    return &amp;errorString{text}
}
</code></pre>

                <div class="highlight-box" data-doubao-translate-traverse-mark="1">
                    <strong>è®¾è®¡è¦ç‚¹ï¼š</strong> <code>errors.New</code> è¿”å›çš„æ˜¯ <code>*errorString</code> æŒ‡é’ˆï¼Œè¿™æ„å‘³ç€å³ä½¿ä¸¤ä¸ªé”™è¯¯æ¶ˆæ¯ç›¸åŒï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸åŒçš„é”™è¯¯å®ä¾‹ï¼ˆåœ°å€ä¸åŒï¼‰ã€‚è¿™æ˜¯æœ‰æ„ä¸ºä¹‹çš„è®¾è®¡ï¼Œé¿å…äº†é”™è¯¯çš„æ„å¤–ç›¸ç­‰ã€‚
                </div>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šä½¿ç”¨ errors.New</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

var (
    // å®šä¹‰åŒ…çº§åˆ«çš„å“¨å…µé”™è¯¯
    ErrNotFound = errors.New("resource not found")
    ErrInvalidInput = errors.New("invalid input parameter")
)

func FindUser(id int) (string, error) {
    if id &lt;= 0 {
        return "", ErrInvalidInput
    }
    
    if id == 404 {
        return "", ErrNotFound
    }
    
    return fmt.Sprintf("User_%d", id), nil
}

func main() {
    // æ­£å¸¸æƒ…å†µ
    user, err := FindUser(100)
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
    } else {
        fmt.Printf("æ‰¾åˆ°ç”¨æˆ·: %s\n", user)
    }
    
    // é”™è¯¯æƒ…å†µ1ï¼šæ— æ•ˆè¾“å…¥
    user, err = FindUser(-1)
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        if err == ErrInvalidInput {
            fmt.Println("  â†’ è¿™æ˜¯ä¸€ä¸ªè¾“å…¥éªŒè¯é”™è¯¯")
        }
    }
    
    // é”™è¯¯æƒ…å†µ2ï¼šèµ„æºæœªæ‰¾åˆ°
    user, err = FindUser(404)
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        if err == ErrNotFound {
            fmt.Println("  â†’ èµ„æºä¸å­˜åœ¨")
        }
    }
}

// è¾“å‡ºï¼š
// æ‰¾åˆ°ç”¨æˆ·: User_100
// é”™è¯¯: invalid input parameter
//   â†’ è¿™æ˜¯ä¸€ä¸ªè¾“å…¥éªŒè¯é”™è¯¯
// é”™è¯¯: resource not found
//   â†’ èµ„æºä¸å­˜åœ¨
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">1.3 æ ¼å¼åŒ–é”™è¯¯ï¼šfmt.Errorf</h3>
                <p data-doubao-translate-traverse-mark="1"><code>fmt.Errorf</code> ç”¨äºåˆ›å»ºå¸¦æœ‰æ ¼å¼åŒ–ä¿¡æ¯çš„é”™è¯¯ï¼Œå¯ä»¥å°†åŠ¨æ€æ•°æ®åµŒå…¥é”™è¯¯æ¶ˆæ¯ä¸­ã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šä½¿ç”¨ fmt.Errorf</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "fmt"
)

// éªŒè¯å¹´é¾„
func ValidateAge(name string, age int) error {
    if age &lt; 0 {
        return fmt.Errorf("ç”¨æˆ· %s çš„å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°: %d", name, age)
    }
    if age &gt; 150 {
        return fmt.Errorf("ç”¨æˆ· %s çš„å¹´é¾„ %d è¶…å‡ºåˆç†èŒƒå›´", name, age)
    }
    return nil
}

// é™¤æ³•è¿ç®—
func Divide(a, b float64) (float64, error) {
    if b == 0 {
        return 0, fmt.Errorf("é™¤æ³•é”™è¯¯: ä¸èƒ½é™¤ä»¥é›¶ (è¢«é™¤æ•°=%v, é™¤æ•°=%v)", a, b)
    }
    return a / b, nil
}

// è¯»å–é…ç½®
func LoadConfig(path string) error {
    // æ¨¡æ‹Ÿæ–‡ä»¶è¯»å–å¤±è´¥
    exists := false
    if !exists {
        return fmt.Errorf("é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥: æ–‡ä»¶ %q ä¸å­˜åœ¨", path)
    }
    return nil
}

func main() {
    // ç¤ºä¾‹1ï¼šå¹´é¾„éªŒè¯
    fmt.Println("=== å¹´é¾„éªŒè¯ç¤ºä¾‹ ===")
    if err := ValidateAge("Alice", -5); err != nil {
        fmt.Printf("éªŒè¯å¤±è´¥: %v\n", err)
    }
    
    if err := ValidateAge("Bob", 200); err != nil {
        fmt.Printf("éªŒè¯å¤±è´¥: %v\n", err)
    }
    
    // ç¤ºä¾‹2ï¼šé™¤æ³•è¿ç®—
    fmt.Println("\n=== é™¤æ³•è¿ç®—ç¤ºä¾‹ ===")
    if result, err := Divide(10, 0); err != nil {
        fmt.Printf("è®¡ç®—å¤±è´¥: %v\n", err)
    } else {
        fmt.Printf("è®¡ç®—ç»“æœ: %.2f\n", result)
    }
    
    // ç¤ºä¾‹3ï¼šé…ç½®åŠ è½½
    fmt.Println("\n=== é…ç½®åŠ è½½ç¤ºä¾‹ ===")
    if err := LoadConfig("/etc/app/config.yaml"); err != nil {
        fmt.Printf("åŠ è½½å¤±è´¥: %v\n", err)
    }
}

// è¾“å‡ºï¼š
// === å¹´é¾„éªŒè¯ç¤ºä¾‹ ===
// éªŒè¯å¤±è´¥: ç”¨æˆ· Alice çš„å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°: -5
// éªŒè¯å¤±è´¥: ç”¨æˆ· Bob çš„å¹´é¾„ 200 è¶…å‡ºåˆç†èŒƒå›´
// 
// === é™¤æ³•è¿ç®—ç¤ºä¾‹ ===
// è®¡ç®—å¤±è´¥: é™¤æ³•é”™è¯¯: ä¸èƒ½é™¤ä»¥é›¶ (è¢«é™¤æ•°=10, é™¤æ•°=0)
// 
// === é…ç½®åŠ è½½ç¤ºä¾‹ ===
// åŠ è½½å¤±è´¥: é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥: æ–‡ä»¶ "/etc/app/config.yaml" ä¸å­˜åœ¨
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">1.4 ä¸ºä»€ä¹ˆ Go ä¸ä½¿ç”¨å¼‚å¸¸ï¼Ÿ</h3>
                <p data-doubao-translate-traverse-mark="1">Go è¯­è¨€è®¾è®¡è€…æœ‰æ„é¿å…ä½¿ç”¨å¼‚å¸¸æœºåˆ¶ï¼Œä¸»è¦åŸå› åŒ…æ‹¬ï¼š</p>

                <div class="feature-grid" data-doubao-translate-traverse-mark="1">
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">ğŸ¯ æ˜ç¡®æ€§</h4>
                        <p data-doubao-translate-traverse-mark="1">é”™è¯¯ä½œä¸ºè¿”å›å€¼ï¼Œä»£ç æµç¨‹æ¸…æ™°å¯è§ï¼Œä¸ä¼šéšè—æ§åˆ¶æµã€‚</p>
                    </div>
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">ğŸ›¡ï¸ å¼ºåˆ¶å¤„ç†</h4>
                        <p data-doubao-translate-traverse-mark="1">ç¼–è¯‘å™¨å’Œå·¥å…·èƒ½æ£€æµ‹æœªå¤„ç†çš„é”™è¯¯ï¼Œå‡å°‘éšè— bugã€‚</p>
                    </div>
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">âš¡ æ€§èƒ½ä¼˜åŠ¿</h4>
                        <p data-doubao-translate-traverse-mark="1">æ²¡æœ‰å¼‚å¸¸æ ˆå±•å¼€çš„å¼€é”€ï¼Œé”™è¯¯å¤„ç†æˆæœ¬æ›´ä½ã€‚</p>
                    </div>
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">ğŸ“– å¯è¯»æ€§</h4>
                        <p data-doubao-translate-traverse-mark="1">é”™è¯¯å¤„ç†é€»è¾‘å°±åœ¨ä»£ç æ—è¾¹ï¼Œæ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</p>
                    </div>
                </div>

                <div class="comparison-table" data-doubao-translate-traverse-mark="1">
                    <table data-doubao-translate-traverse-mark="1">
                        <thead data-doubao-translate-traverse-mark="1">
                            <tr data-doubao-translate-traverse-mark="1">
                                <th data-doubao-translate-traverse-mark="1">ç‰¹æ€§</th>
                                <th data-doubao-translate-traverse-mark="1">Go é”™è¯¯å¤„ç†</th>
                                <th data-doubao-translate-traverse-mark="1">å¼‚å¸¸æœºåˆ¶</th>
                            </tr>
                        </thead>
                        <tbody data-doubao-translate-traverse-mark="1">
                            <tr data-doubao-translate-traverse-mark="1">
                                <td data-doubao-translate-traverse-mark="1">æ§åˆ¶æµ</td>
                                <td data-doubao-translate-traverse-mark="1">âœ… æ˜¾å¼ã€çº¿æ€§</td>
                                <td data-doubao-translate-traverse-mark="1">âŒ éšå¼ã€è·³è·ƒ</td>
                            </tr>
                            <tr data-doubao-translate-traverse-mark="1">
                                <td data-doubao-translate-traverse-mark="1">ç¼–è¯‘æ£€æŸ¥</td>
                                <td data-doubao-translate-traverse-mark="1">âœ… å¯æ£€æµ‹æœªå¤„ç†é”™è¯¯</td>
                                <td data-doubao-translate-traverse-mark="1">âŒ éš¾ä»¥é™æ€æ£€æŸ¥</td>
                            </tr>
                            <tr data-doubao-translate-traverse-mark="1">
                                <td data-doubao-translate-traverse-mark="1">æ€§èƒ½å¼€é”€</td>
                                <td data-doubao-translate-traverse-mark="1">âœ… ä½ï¼ˆæ™®é€šå€¼ä¼ é€’ï¼‰</td>
                                <td data-doubao-translate-traverse-mark="1">âŒ é«˜ï¼ˆæ ˆå±•å¼€ï¼‰</td>
                            </tr>
                            <tr data-doubao-translate-traverse-mark="1">
                                <td data-doubao-translate-traverse-mark="1">ä»£ç å¯è¯»æ€§</td>
                                <td data-doubao-translate-traverse-mark="1">âœ… é”™è¯¯å¤„ç†å°±åœ°å¯è§</td>
                                <td data-doubao-translate-traverse-mark="1">âŒ éœ€è¦æŸ¥æ‰¾ catch å—</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ç¬¬äºŒç« ï¼šé”™è¯¯åˆ¤æ–­ä¸ç±»å‹æ–­è¨€ -->
            <section id="chapter2" class="section" data-doubao-translate-traverse-mark="1">
                <h2 data-doubao-translate-traverse-mark="1">ç¬¬äºŒç« ï¼šé”™è¯¯åˆ¤æ–­ä¸ç±»å‹æ–­è¨€</h2>
                <span class="tag tag-go113" data-doubao-translate-traverse-mark="1">Go 1.13+</span>

                <h3 data-doubao-translate-traverse-mark="1">2.1 errors.Isï¼šæ™ºèƒ½é”™è¯¯æ¯”è¾ƒ</h3>
                <p data-doubao-translate-traverse-mark="1"><code>errors.Is</code> æ˜¯ Go 1.13 å¼•å…¥çš„é‡è¦åŠŸèƒ½ï¼Œç”¨äºåˆ¤æ–­é”™è¯¯é“¾ä¸­æ˜¯å¦åŒ…å«ç‰¹å®šé”™è¯¯ã€‚å®ƒæ¯”ä¼ ç»Ÿçš„ <code>==</code> æ¯”è¾ƒæ›´å¼ºå¤§ï¼Œæ”¯æŒé”™è¯¯é“¾éå†ã€‚</p>

                <div class="highlight-box" data-doubao-translate-traverse-mark="1">
                    <strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong> <code>errors.Is</code> ä¸ä»…æ¯”è¾ƒé”™è¯¯æœ¬èº«ï¼Œè¿˜ä¼šæ²¿ç€é”™è¯¯é“¾å‘ä¸‹æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…çš„é”™è¯¯æˆ–åˆ°è¾¾é“¾å°¾ã€‚
                </div>

                <div class="code-header" data-doubao-translate-traverse-mark="1">errors.Is å®ç°åŸç†</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">// errors/wrap.go (ç®€åŒ–ç‰ˆ)
func Is(err, target error) bool {
    if target == nil {
        return err == target
    }
    
    // æ£€æŸ¥ target æ˜¯å¦å¯æ¯”è¾ƒ
    isComparable := reflectlite.TypeOf(target).Comparable()
    
    for {
        if isComparable &amp;&amp; err == target {
            return true
        }
        
        // å¦‚æœé”™è¯¯å®ç°äº† Is(error) bool æ–¹æ³•ï¼Œè°ƒç”¨å®ƒ
        if x, ok := err.(interface{ Is(error) bool }); ok &amp;&amp; x.Is(target) {
            return true
        }
        
        // ç»§ç»­å‘ä¸‹éå†é”™è¯¯é“¾
        if err = Unwrap(err); err == nil {
            return false
        }
    }
}
</code></pre>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šerrors.Is çš„ä½¿ç”¨</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
    "io/fs"
    "os"
)

var (
    ErrDatabase = errors.New("database error")
    ErrNetwork  = errors.New("network error")
)

// æ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥
func ConnectDB(host string) error {
    if host == "" {
        // ä½¿ç”¨ %w åŒ…è£…é”™è¯¯ï¼Œåˆ›å»ºé”™è¯¯é“¾
        return fmt.Errorf("è¿æ¥æ•°æ®åº“å¤±è´¥ [host=%s]: %w", host, ErrDatabase)
    }
    return nil
}

// æ¨¡æ‹Ÿå¤šå±‚è°ƒç”¨æ ˆ
func InitService() error {
    if err := ConnectDB(""); err != nil {
        return fmt.Errorf("æœåŠ¡åˆå§‹åŒ–å¤±è´¥: %w", err)
    }
    return nil
}

func main() {
    fmt.Println("=== errors.Is ç¤ºä¾‹ ===\n")
    
    // ç¤ºä¾‹1ï¼šåŸºæœ¬ç”¨æ³•
    err := InitService()
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        // ä½¿ç”¨ errors.Is æ£€æŸ¥é”™è¯¯é“¾
        if errors.Is(err, ErrDatabase) {
            fmt.Println("âœ“ æ£€æµ‹åˆ°æ•°æ®åº“é”™è¯¯")
        }
        
        // ä¼ ç»Ÿ == æ¯”è¾ƒä¼šå¤±è´¥ï¼ˆå› ä¸ºé”™è¯¯è¢«åŒ…è£…äº†ï¼‰
        if err == ErrDatabase {
            fmt.Println("âœ— == æ¯”è¾ƒæˆåŠŸ")
        } else {
            fmt.Println("âœ— == æ¯”è¾ƒå¤±è´¥ï¼ˆé”™è¯¯å·²è¢«åŒ…è£…ï¼‰")
        }
    }
    
    fmt.Println("\n=== æ–‡ä»¶æ“ä½œç¤ºä¾‹ ===\n")
    
    // ç¤ºä¾‹2ï¼šæ ‡å‡†åº“é”™è¯¯
    _, err = os.Open("/nonexistent/file.txt")
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯"æ–‡ä»¶ä¸å­˜åœ¨"é”™è¯¯
        if errors.Is(err, fs.ErrNotExist) {
            fmt.Println("âœ“ æ–‡ä»¶ä¸å­˜åœ¨")
        }
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯æƒé™é”™è¯¯
        if errors.Is(err, fs.ErrPermission) {
            fmt.Println("âœ“ æƒé™ä¸è¶³")
        } else {
            fmt.Println("âœ— ä¸æ˜¯æƒé™é”™è¯¯")
        }
    }
    
    fmt.Println("\n=== è‡ªå®šä¹‰ Is æ–¹æ³•ç¤ºä¾‹ ===\n")
    
    // ç¤ºä¾‹3ï¼šè‡ªå®šä¹‰ Is è¡Œä¸º
    tempErr := &amp;TemporaryError{Code: 503}
    wrappedErr := fmt.Errorf("è¯·æ±‚å¤±è´¥: %w", tempErr)
    
    if errors.Is(wrappedErr, ErrTemporary) {
        fmt.Println("âœ“ æ£€æµ‹åˆ°ä¸´æ—¶é”™è¯¯ï¼ˆé€šè¿‡è‡ªå®šä¹‰ Is æ–¹æ³•ï¼‰")
    }
}

// è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Œå¸¦æœ‰è‡ªå®šä¹‰ Is æ–¹æ³•
var ErrTemporary = errors.New("temporary error")

type TemporaryError struct {
    Code int
}

func (e *TemporaryError) Error() string {
    return fmt.Sprintf("ä¸´æ—¶é”™è¯¯ (ä»£ç : %d)", e.Code)
}

// è‡ªå®šä¹‰ Is æ–¹æ³•ï¼šæ‰€æœ‰ 5xx é”™è¯¯éƒ½è¢«è§†ä¸ºä¸´æ—¶é”™è¯¯
func (e *TemporaryError) Is(target error) bool {
    if target == ErrTemporary {
        return e.Code &gt;= 500 &amp;&amp; e.Code &lt; 600
    }
    return false
}

// è¾“å‡ºï¼š
// === errors.Is ç¤ºä¾‹ ===
//
// é”™è¯¯: æœåŠ¡åˆå§‹åŒ–å¤±è´¥: è¿æ¥æ•°æ®åº“å¤±è´¥ [host=]: database error
// âœ“ æ£€æµ‹åˆ°æ•°æ®åº“é”™è¯¯
// âœ— == æ¯”è¾ƒå¤±è´¥ï¼ˆé”™è¯¯å·²è¢«åŒ…è£…ï¼‰
//
// === æ–‡ä»¶æ“ä½œç¤ºä¾‹ ===
//
// é”™è¯¯: open /nonexistent/file.txt: no such file or directory
// âœ“ æ–‡ä»¶ä¸å­˜åœ¨
// âœ— ä¸æ˜¯æƒé™é”™è¯¯
//
// === è‡ªå®šä¹‰ Is æ–¹æ³•ç¤ºä¾‹ ===
//
// âœ“ æ£€æµ‹åˆ°ä¸´æ—¶é”™è¯¯ï¼ˆé€šè¿‡è‡ªå®šä¹‰ Is æ–¹æ³•ï¼‰
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">2.2 errors.Asï¼šé”™è¯¯ç±»å‹æå–</h3>
                <p data-doubao-translate-traverse-mark="1"><code>errors.As</code> ç”¨äºä»é”™è¯¯é“¾ä¸­æå–ç‰¹å®šç±»å‹çš„é”™è¯¯ï¼Œå¹¶è¿›è¡Œç±»å‹æ–­è¨€ã€‚å®ƒæ¯”ä¼ ç»Ÿçš„ç±»å‹æ–­è¨€æ›´æ™ºèƒ½ï¼Œæ”¯æŒé”™è¯¯é“¾éå†ã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">errors.As å®ç°åŸç†</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">// errors/wrap.go (ç®€åŒ–ç‰ˆ)
func As(err error, target interface{}) bool {
    if target == nil {
        panic("errors: target cannot be nil")
    }
    
    val := reflectlite.ValueOf(target)
    typ := val.Type()
    
    // target å¿…é¡»æ˜¯é nil æŒ‡é’ˆ
    if typ.Kind() != reflectlite.Ptr || val.IsNil() {
        panic("errors: target must be a non-nil pointer")
    }
    
    targetType := typ.Elem()
    
    for {
        // å°è¯•ç±»å‹æ–­è¨€
        if reflectlite.TypeOf(err).AssignableTo(targetType) {
            val.Elem().Set(reflectlite.ValueOf(err))
            return true
        }
        
        // å¦‚æœé”™è¯¯å®ç°äº† As(interface{}) bool æ–¹æ³•
        if x, ok := err.(interface{ As(interface{}) bool }); ok &amp;&amp; x.As(target) {
            return true
        }
        
        // ç»§ç»­éå†é”™è¯¯é“¾
        if err = Unwrap(err); err == nil {
            return false
        }
    }
}
</code></pre>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šerrors.As çš„ä½¿ç”¨</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
    "os"
    "syscall"
)

// è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼šValidationError
type ValidationError struct {
    Field   string
    Message string
    Value   interface{}
}

func (e *ValidationError) Error() string {
    return fmt.Sprintf("éªŒè¯å¤±è´¥ [å­—æ®µ=%s, å€¼=%v]: %s", e.Field, e.Value, e.Message)
}

// è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼šHTTPError
type HTTPError struct {
    StatusCode int
    Method     string
    URL        string
}

func (e *HTTPError) Error() string {
    return fmt.Sprintf("HTTP é”™è¯¯ %d: %s %s", e.StatusCode, e.Method, e.URL)
}

// éªŒè¯ç”¨æˆ·è¾“å…¥
func ValidateUser(name string, age int) error {
    if age &lt; 0 {
        err := &amp;ValidationError{
            Field:   "age",
            Message: "å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°",
            Value:   age,
        }
        return fmt.Errorf("ç”¨æˆ·éªŒè¯å¤±è´¥: %w", err)
    }
    return nil
}

// æ¨¡æ‹Ÿ HTTP è¯·æ±‚
func FetchData(url string) error {
    err := &amp;HTTPError{
        StatusCode: 404,
        Method:     "GET",
        URL:        url,
    }
    return fmt.Errorf("è·å–æ•°æ®å¤±è´¥: %w", err)
}

func main() {
    fmt.Println("=== errors.As ç¤ºä¾‹1ï¼šè‡ªå®šä¹‰é”™è¯¯ç±»å‹ ===\n")
    
    // ç¤ºä¾‹1ï¼šæå– ValidationError
    err := ValidateUser("Alice", -5)
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        var validationErr *ValidationError
        if errors.As(err, &amp;validationErr) {
            fmt.Printf("âœ“ æå–åˆ°éªŒè¯é”™è¯¯:\n")
            fmt.Printf("  - å­—æ®µ: %s\n", validationErr.Field)
            fmt.Printf("  - æ¶ˆæ¯: %s\n", validationErr.Message)
            fmt.Printf("  - å€¼: %v\n", validationErr.Value)
        }
    }
    
    fmt.Println("\n=== errors.As ç¤ºä¾‹2ï¼šHTTP é”™è¯¯ ===\n")
    
    // ç¤ºä¾‹2ï¼šæå– HTTPError
    err = FetchData("https://api.example.com/users")
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        var httpErr *HTTPError
        if errors.As(err, &amp;httpErr) {
            fmt.Printf("âœ“ æå–åˆ° HTTP é”™è¯¯:\n")
            fmt.Printf("  - çŠ¶æ€ç : %d\n", httpErr.StatusCode)
            fmt.Printf("  - æ–¹æ³•: %s\n", httpErr.Method)
            fmt.Printf("  - URL: %s\n", httpErr.URL)
            
            // æ ¹æ®çŠ¶æ€ç åšä¸åŒå¤„ç†
            switch httpErr.StatusCode {
            case 404:
                fmt.Println("  â†’ å¤„ç†å»ºè®®: èµ„æºä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ URL")
            case 500:
                fmt.Println("  â†’ å¤„ç†å»ºè®®: æœåŠ¡å™¨é”™è¯¯ï¼Œç¨åé‡è¯•")
            }
        }
    }
    
    fmt.Println("\n=== errors.As ç¤ºä¾‹3ï¼šç³»ç»Ÿé”™è¯¯ ===\n")
    
    // ç¤ºä¾‹3ï¼šæå–ç³»ç»Ÿé”™è¯¯
    _, err = os.Open("/root/secret.txt")
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        // æå–åº•å±‚çš„ syscall.Errno
        var errno syscall.Errno
        if errors.As(err, &amp;errno) {
            fmt.Printf("âœ“ æå–åˆ°ç³»ç»Ÿé”™è¯¯ç : %d\n", errno)
            
            switch errno {
            case syscall.ENOENT:
                fmt.Println("  â†’ æ–‡ä»¶ä¸å­˜åœ¨")
            case syscall.EACCES:
                fmt.Println("  â†’ æƒé™è¢«æ‹’ç»")
            default:
                fmt.Printf("  â†’ å…¶ä»–ç³»ç»Ÿé”™è¯¯: %v\n", errno)
            }
        }
    }
}

// è¾“å‡ºç¤ºä¾‹ï¼š
// === errors.As ç¤ºä¾‹1ï¼šè‡ªå®šä¹‰é”™è¯¯ç±»å‹ ===
//
// é”™è¯¯: ç”¨æˆ·éªŒè¯å¤±è´¥: éªŒè¯å¤±è´¥ [å­—æ®µ=age, å€¼=-5]: å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°
// âœ“ æå–åˆ°éªŒè¯é”™è¯¯:
//   - å­—æ®µ: age
//   - æ¶ˆæ¯: å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°
//   - å€¼: -5
//
// === errors.As ç¤ºä¾‹2ï¼šHTTP é”™è¯¯ ===
//
// é”™è¯¯: è·å–æ•°æ®å¤±è´¥: HTTP é”™è¯¯ 404: GET https://api.example.com/users
// âœ“ æå–åˆ° HTTP é”™è¯¯:
//   - çŠ¶æ€ç : 404
//   - æ–¹æ³•: GET
//   - URL: https://api.example.com/users
//   â†’ å¤„ç†å»ºè®®: èµ„æºä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ URL
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">2.3 ä¼ ç»Ÿæ–¹æ³• vs. æ–°æ–¹æ³•å¯¹æ¯”</h3>

                <table class="comparison-table" data-doubao-translate-traverse-mark="1">
                    <thead data-doubao-translate-traverse-mark="1">
                        <tr data-doubao-translate-traverse-mark="1">
                            <th data-doubao-translate-traverse-mark="1">æ¯”è¾ƒç»´åº¦</th>
                            <th data-doubao-translate-traverse-mark="1">ä¼ ç»Ÿæ–¹æ³• (== / ç±»å‹æ–­è¨€)</th>
                            <th data-doubao-translate-traverse-mark="1">Go 1.13+ (Is / As)</th>
                        </tr>
                    </thead>
                    <tbody data-doubao-translate-traverse-mark="1">
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">é”™è¯¯é“¾æ”¯æŒ</td>
                            <td data-doubao-translate-traverse-mark="1">âŒ ä¸æ”¯æŒï¼Œåªæ¯”è¾ƒç›´æ¥å€¼</td>
                            <td data-doubao-translate-traverse-mark="1">âœ… è‡ªåŠ¨éå†é”™è¯¯é“¾</td>
                        </tr>
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">åŒ…è£…é”™è¯¯</td>
                            <td data-doubao-translate-traverse-mark="1">âŒ æ— æ³•è¯†åˆ«è¢«åŒ…è£…çš„é”™è¯¯</td>
                            <td data-doubao-translate-traverse-mark="1">âœ… å¯ä»¥æ‰¾åˆ°ä»»æ„å±‚çº§çš„é”™è¯¯</td>
                        </tr>
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘</td>
                            <td data-doubao-translate-traverse-mark="1">âŒ æ— æ³•è‡ªå®šä¹‰</td>
                            <td data-doubao-translate-traverse-mark="1">âœ… å¯å®ç° Is/As æ–¹æ³•</td>
                        </tr>
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">ç±»å‹å®‰å…¨</td>
                            <td data-doubao-translate-traverse-mark="1">âš ï¸ éœ€è¦æ‰‹åŠ¨æ£€æŸ¥</td>
                            <td data-doubao-translate-traverse-mark="1">âœ… ç¼–è¯‘æœŸç±»å‹æ£€æŸ¥</td>
                        </tr>
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">æ¨èä½¿ç”¨åœºæ™¯</td>
                            <td data-doubao-translate-traverse-mark="1">ç®€å•çš„ç›´æ¥é”™è¯¯æ¯”è¾ƒ</td>
                            <td data-doubao-translate-traverse-mark="1">æ‰€æœ‰é”™è¯¯åˆ¤æ–­å’Œç±»å‹æå–</td>
                        </tr>
                    </tbody>
                </table>

                <div class="warning-box" data-doubao-translate-traverse-mark="1">
                    <strong>âš ï¸ æ³¨æ„ï¼š</strong> åœ¨ç°ä»£ Go ä»£ç ä¸­ï¼Œåº”ä¼˜å…ˆä½¿ç”¨ <code>errors.Is</code> å’Œ <code>errors.As</code>ï¼Œè€Œä¸æ˜¯ <code>==</code> å’Œç±»å‹æ–­è¨€ã€‚æ–°æ–¹æ³•ä¸ä»…æ›´å¼ºå¤§ï¼Œè¿˜èƒ½æ›´å¥½åœ°åº”å¯¹æœªæ¥çš„ä»£ç å˜åŒ–ã€‚
                </div>
            </section>

            <!-- ç¬¬ä¸‰ç« ï¼šé”™è¯¯åŒ…è£…ä¸é”™è¯¯é“¾ -->
            <section id="chapter3" class="section" data-doubao-translate-traverse-mark="1">
                <h2 data-doubao-translate-traverse-mark="1">ç¬¬ä¸‰ç« ï¼šé”™è¯¯åŒ…è£…ä¸é”™è¯¯é“¾</h2>
                <span class="tag tag-go113" data-doubao-translate-traverse-mark="1">Go 1.13+</span>

                <h3 data-doubao-translate-traverse-mark="1">3.1 %w æ ¼å¼åŒ–ç¬¦çš„é­”æ³•</h3>
                <p data-doubao-translate-traverse-mark="1">Go 1.13 å¼•å…¥çš„ <code>%w</code> æ ¼å¼åŒ–ç¬¦æ˜¯é”™è¯¯åŒ…è£…çš„æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒåœ¨ <code>fmt.Errorf</code> ä¸­ä½¿ç”¨ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«åŸå§‹é”™è¯¯çš„æ–°é”™è¯¯ã€‚</p>

                <div class="highlight-box" data-doubao-translate-traverse-mark="1">
                    <strong>å…³é”®ç‰¹æ€§ï¼š</strong> ä½¿ç”¨ <code>%w</code> åŒ…è£…çš„é”™è¯¯ä¼šä¿ç•™åŸå§‹é”™è¯¯ä¿¡æ¯ï¼Œå½¢æˆé”™è¯¯é“¾ã€‚è¿™ä½¿å¾— <code>errors.Is</code> å’Œ <code>errors.As</code> èƒ½å¤Ÿéå†æ•´ä¸ªé”™è¯¯é“¾è¿›è¡ŒåŒ¹é…ã€‚
                </div>

                <div class="code-header" data-doubao-translate-traverse-mark="1">%w vs %v çš„åŒºåˆ«</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

var ErrOriginal = errors.New("åŸå§‹é”™è¯¯")

func main() {
    // ä½¿ç”¨ %vï¼šé”™è¯¯ä¿¡æ¯è¢«åµŒå…¥ï¼Œä½†é”™è¯¯é“¾æ–­å¼€
    errWithV := fmt.Errorf("åŒ…è£…é”™è¯¯: %v", ErrOriginal)
    fmt.Printf("ä½¿ç”¨ %%v åŒ…è£…: %v\n", errWithV)
    fmt.Printf("  errors.Is èƒ½æ‰¾åˆ°åŸå§‹é”™è¯¯? %v\n", errors.Is(errWithV, ErrOriginal))
    fmt.Printf("  errors.Unwrap ç»“æœ: %v\n\n", errors.Unwrap(errWithV))
    
    // ä½¿ç”¨ %wï¼šé”™è¯¯ä¿¡æ¯è¢«åµŒå…¥ï¼Œä¸”ä¿ç•™é”™è¯¯é“¾
    errWithW := fmt.Errorf("åŒ…è£…é”™è¯¯: %w", ErrOriginal)
    fmt.Printf("ä½¿ç”¨ %%w åŒ…è£…: %v\n", errWithW)
    fmt.Printf("  errors.Is èƒ½æ‰¾åˆ°åŸå§‹é”™è¯¯? %v\n", errors.Is(errWithW, ErrOriginal))
    fmt.Printf("  errors.Unwrap ç»“æœ: %v\n", errors.Unwrap(errWithW))
}

// è¾“å‡ºï¼š
// ä½¿ç”¨ %v åŒ…è£…: åŒ…è£…é”™è¯¯: åŸå§‹é”™è¯¯
//   errors.Is èƒ½æ‰¾åˆ°åŸå§‹é”™è¯¯? false
//   errors.Unwrap ç»“æœ: <nil>
//
// ä½¿ç”¨ %w åŒ…è£…: åŒ…è£…é”™è¯¯: åŸå§‹é”™è¯¯
//   errors.Is èƒ½æ‰¾åˆ°åŸå§‹é”™è¯¯? true
//   errors.Unwrap ç»“æœ: åŸå§‹é”™è¯¯
</nil></code></pre>

                <h3 data-doubao-translate-traverse-mark="1">3.2 é”™è¯¯é“¾çš„æ„å»ºä¸éå†</h3>
                <p data-doubao-translate-traverse-mark="1">é”™è¯¯é“¾æ˜¯é€šè¿‡å¤šæ¬¡åŒ…è£…å½¢æˆçš„é“¾å¼ç»“æ„ã€‚æ¯ä¸€å±‚åŒ…è£…éƒ½å¯ä»¥æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒåŒæ—¶ä¿ç•™åº•å±‚é”™è¯¯ã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šæ„å»ºå¤šå±‚é”™è¯¯é“¾</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

var (
    ErrDatabase    = errors.New("database error")
    ErrPermission  = errors.New("permission denied")
)

// ç¬¬1å±‚ï¼šæ•°æ®åº“æ“ä½œ
func QueryDB(query string) error {
    // æ¨¡æ‹Ÿæ•°æ®åº“é”™è¯¯
    return ErrDatabase
}

// ç¬¬2å±‚ï¼šæ•°æ®è®¿é—®å±‚
func GetUserByID(id int) error {
    err := QueryDB("SELECT * FROM users WHERE id = ?")
    if err != nil {
        return fmt.Errorf("æ•°æ®è®¿é—®å¤±è´¥ [ç”¨æˆ·ID=%d]: %w", id, err)
    }
    return nil
}

// ç¬¬3å±‚ï¼šä¸šåŠ¡é€»è¾‘å±‚
func LoadUserProfile(id int) error {
    err := GetUserByID(id)
    if err != nil {
        return fmt.Errorf("åŠ è½½ç”¨æˆ·èµ„æ–™å¤±è´¥: %w", err)
    }
    return nil
}

// ç¬¬4å±‚ï¼šAPI å¤„ç†å±‚
func HandleUserRequest(id int) error {
    err := LoadUserProfile(id)
    if err != nil {
        return fmt.Errorf("å¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥ [è¯·æ±‚ID=%d]: %w", id, err)
    }
    return nil
}

// æ‰‹åŠ¨éå†é”™è¯¯é“¾
func PrintErrorChain(err error) {
    fmt.Println("é”™è¯¯é“¾ï¼š")
    level := 1
    for err != nil {
        fmt.Printf("  [å±‚çº§ %d] %v\n", level, err)
        err = errors.Unwrap(err)
        level++
    }
}

func main() {
    fmt.Println("=== é”™è¯¯é“¾æ„å»ºç¤ºä¾‹ ===\n")
    
    err := HandleUserRequest(12345)
    if err != nil {
        fmt.Printf("æœ€ç»ˆé”™è¯¯: %v\n\n", err)
        
        // éå†é”™è¯¯é“¾
        PrintErrorChain(err)
        
        // ä½¿ç”¨ errors.Is æ£€æµ‹æ ¹æœ¬åŸå› 
        fmt.Println("\né”™è¯¯è¯Šæ–­ï¼š")
        if errors.Is(err, ErrDatabase) {
            fmt.Println("  âœ“ æ ¹æœ¬åŸå› æ˜¯æ•°æ®åº“é”™è¯¯")
        }
        if errors.Is(err, ErrPermission) {
            fmt.Println("  âœ“ æ¶‰åŠæƒé™é—®é¢˜")
        } else {
            fmt.Println("  âœ— ä¸æ¶‰åŠæƒé™é—®é¢˜")
        }
    }
}

// è¾“å‡ºï¼š
// === é”™è¯¯é“¾æ„å»ºç¤ºä¾‹ ===
//
// æœ€ç»ˆé”™è¯¯: å¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥ [è¯·æ±‚ID=12345]: åŠ è½½ç”¨æˆ·èµ„æ–™å¤±è´¥: æ•°æ®è®¿é—®å¤±è´¥ [ç”¨æˆ·ID=12345]: database error
//
// é”™è¯¯é“¾ï¼š
//   [å±‚çº§ 1] å¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥ [è¯·æ±‚ID=12345]: åŠ è½½ç”¨æˆ·èµ„æ–™å¤±è´¥: æ•°æ®è®¿é—®å¤±è´¥ [ç”¨æˆ·ID=12345]: database error
//   [å±‚çº§ 2] åŠ è½½ç”¨æˆ·èµ„æ–™å¤±è´¥: æ•°æ®è®¿é—®å¤±è´¥ [ç”¨æˆ·ID=12345]: database error
//   [å±‚çº§ 3] æ•°æ®è®¿é—®å¤±è´¥ [ç”¨æˆ·ID=12345]: database error
//   [å±‚çº§ 4] database error
//
// é”™è¯¯è¯Šæ–­ï¼š
//   âœ“ æ ¹æœ¬åŸå› æ˜¯æ•°æ®åº“é”™è¯¯
//   âœ— ä¸æ¶‰åŠæƒé™é—®é¢˜
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">3.3 Unwrap æ–¹æ³•è¯¦è§£</h3>
                <p data-doubao-translate-traverse-mark="1"><code>errors.Unwrap</code> å‡½æ•°ç”¨äºä»åŒ…è£…çš„é”™è¯¯ä¸­æå–åº•å±‚é”™è¯¯ã€‚è‡ªå®šä¹‰é”™è¯¯ç±»å‹ä¹Ÿå¯ä»¥å®ç° <code>Unwrap()</code> æ–¹æ³•æ¥æ§åˆ¶è§£åŒ…è¡Œä¸ºã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">Unwrap å®ç°åŸç†</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">// errors/wrap.go
func Unwrap(err error) error {
    // æ£€æŸ¥é”™è¯¯æ˜¯å¦å®ç°äº† Unwrap æ–¹æ³•
    u, ok := err.(interface {
        Unwrap() error
    })
    if !ok {
        return nil
    }
    return u.Unwrap()
}
</code></pre>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ Unwrap æ–¹æ³•</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
    "time"
)

// è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Œå¸¦æœ‰æ—¶é—´æˆ³å’Œä¸Šä¸‹æ–‡
type ContextError struct {
    Timestamp time.Time
    Operation string
    Err       error
}

func (e *ContextError) Error() string {
    return fmt.Sprintf("[%s] %s æ“ä½œå¤±è´¥: %v", 
        e.Timestamp.Format("2006-01-02 15:04:05"), 
        e.Operation, 
        e.Err)
}

// å®ç° Unwrap æ–¹æ³•ï¼Œä½¿é”™è¯¯é“¾èƒ½å¤Ÿç»§ç»­
func (e *ContextError) Unwrap() error {
    return e.Err
}

// åˆ›å»ºå¸¦ä¸Šä¸‹æ–‡çš„é”™è¯¯
func NewContextError(operation string, err error) error {
    return &amp;ContextError{
        Timestamp: time.Now(),
        Operation: operation,
        Err:       err,
    }
}

var ErrTimeout = errors.New("operation timeout")

func main() {
    fmt.Println("=== è‡ªå®šä¹‰ Unwrap æ–¹æ³•ç¤ºä¾‹ ===\n")
    
    // åˆ›å»ºå¤šå±‚åŒ…è£…çš„é”™è¯¯
    baseErr := ErrTimeout
    err1 := NewContextError("æ•°æ®åº“æŸ¥è¯¢", baseErr)
    err2 := NewContextError("ç”¨æˆ·æœåŠ¡", err1)
    err3 := NewContextError("API è¯·æ±‚", err2)
    
    fmt.Printf("æœ€å¤–å±‚é”™è¯¯: %v\n\n", err3)
    
    // æ‰‹åŠ¨è§£åŒ…
    fmt.Println("æ‰‹åŠ¨è§£åŒ…è¿‡ç¨‹ï¼š")
    current := err3
    level := 1
    for current != nil {
        fmt.Printf("  å±‚çº§ %d: %v\n", level, current)
        
        // å¦‚æœæ˜¯ ContextErrorï¼Œæ˜¾ç¤ºé¢å¤–ä¿¡æ¯
        if ctxErr, ok := current.(*ContextError); ok {
            fmt.Printf("         â†’ æ“ä½œ: %s, æ—¶é—´: %s\n", 
                ctxErr.Operation, 
                ctxErr.Timestamp.Format("15:04:05"))
        }
        
        current = errors.Unwrap(current)
        level++
    }
    
    // éªŒè¯ errors.Is ä»ç„¶æœ‰æ•ˆ
    fmt.Println("\né”™è¯¯æ£€æµ‹ï¼š")
    if errors.Is(err3, ErrTimeout) {
        fmt.Println("  âœ“ æˆåŠŸæ£€æµ‹åˆ°è¶…æ—¶é”™è¯¯ï¼ˆé€šè¿‡3å±‚åŒ…è£…ï¼‰")
    }
}

// è¾“å‡ºç¤ºä¾‹ï¼š
// === è‡ªå®šä¹‰ Unwrap æ–¹æ³•ç¤ºä¾‹ ===
//
// æœ€å¤–å±‚é”™è¯¯: [2026-01-22 10:04:57] API è¯·æ±‚ æ“ä½œå¤±è´¥: [2026-01-22 10:04:57] ç”¨æˆ·æœåŠ¡ æ“ä½œå¤±è´¥: [2026-01-22 10:04:57] æ•°æ®åº“æŸ¥è¯¢ æ“ä½œå¤±è´¥: operation timeout
//
// æ‰‹åŠ¨è§£åŒ…è¿‡ç¨‹ï¼š
//   å±‚çº§ 1: [2026-01-22 10:04:57] API è¯·æ±‚ æ“ä½œå¤±è´¥: ...
//          â†’ æ“ä½œ: API è¯·æ±‚, æ—¶é—´: 10:04:57
//   å±‚çº§ 2: [2026-01-22 10:04:57] ç”¨æˆ·æœåŠ¡ æ“ä½œå¤±è´¥: ...
//          â†’ æ“ä½œ: ç”¨æˆ·æœåŠ¡, æ—¶é—´: 10:04:57
//   å±‚çº§ 3: [2026-01-22 10:04:57] æ•°æ®åº“æŸ¥è¯¢ æ“ä½œå¤±è´¥: operation timeout
//          â†’ æ“ä½œ: æ•°æ®åº“æŸ¥è¯¢, æ—¶é—´: 10:04:57
//   å±‚çº§ 4: operation timeout
//
// é”™è¯¯æ£€æµ‹ï¼š
//   âœ“ æˆåŠŸæ£€æµ‹åˆ°è¶…æ—¶é”™è¯¯ï¼ˆé€šè¿‡3å±‚åŒ…è£…ï¼‰
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">3.4 é”™è¯¯åŒ…è£…æœ€ä½³å®è·µ</h3>

                <div class="success-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">âœ… æ¨èåšæ³•ï¼š</strong>
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1">åœ¨æ¯ä¸€å±‚æ·»åŠ æœ‰ç”¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå‡½æ•°åã€å‚æ•°å€¼ã€æ“ä½œç±»å‹ï¼‰</li>
                        <li data-doubao-translate-traverse-mark="1">ä½¿ç”¨ <code>%w</code> è€Œä¸æ˜¯ <code>%v</code> æ¥ä¿ç•™é”™è¯¯é“¾</li>
                        <li data-doubao-translate-traverse-mark="1">é”™è¯¯ä¿¡æ¯åº”è¯¥ä»æœ€å¤–å±‚åˆ°æœ€å†…å±‚é€å±‚è¯¦ç»†</li>
                        <li data-doubao-translate-traverse-mark="1">åœ¨åˆé€‚çš„å±‚çº§è¿›è¡Œé”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•</li>
                    </ul>
                </div>

                <div class="warning-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">âŒ é¿å…çš„åšæ³•ï¼š</strong>
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1">ä¸è¦è¿‡åº¦åŒ…è£…ï¼šæ¯å±‚éƒ½åº”è¯¥æ·»åŠ æœ‰æ„ä¹‰çš„ä¿¡æ¯</li>
                        <li data-doubao-translate-traverse-mark="1">ä¸è¦ä¸¢å¤±åŸå§‹é”™è¯¯ï¼šå§‹ç»ˆä½¿ç”¨ <code>%w</code> ä¿ç•™é”™è¯¯é“¾</li>
                        <li data-doubao-translate-traverse-mark="1">ä¸è¦åœ¨æ¯ä¸€å±‚éƒ½è®°å½•æ—¥å¿—ï¼šé€šå¸¸åªåœ¨é¡¶å±‚æˆ–å…³é”®å±‚è®°å½•</li>
                        <li data-doubao-translate-traverse-mark="1">ä¸è¦åˆ›å»ºè¿‡æ·±çš„é”™è¯¯é“¾ï¼ˆä¸€èˆ¬3-5å±‚å³å¯ï¼‰</li>
                    </ul>
                </div>
            </section>

            <!-- ç¬¬å››ç« ï¼šè‡ªå®šä¹‰é”™è¯¯ç±»å‹ -->
            <section id="chapter4" class="section" data-doubao-translate-traverse-mark="1">
                <h2 data-doubao-translate-traverse-mark="1">ç¬¬å››ç« ï¼šè‡ªå®šä¹‰é”™è¯¯ç±»å‹</h2>

                <h3 data-doubao-translate-traverse-mark="1">4.1 ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Ÿ</h3>
                <p data-doubao-translate-traverse-mark="1">è™½ç„¶ç®€å•çš„å­—ç¬¦ä¸²é”™è¯¯èƒ½æ»¡è¶³åŸºæœ¬éœ€æ±‚ï¼Œä½†åœ¨å¤æ‚ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ï¼š</p>
                <ul data-doubao-translate-traverse-mark="1">
                    <li data-doubao-translate-traverse-mark="1">æºå¸¦ç»“æ„åŒ–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆé”™è¯¯ç ã€æ—¶é—´æˆ³ã€ç”¨æˆ·IDç­‰ï¼‰</li>
                    <li data-doubao-translate-traverse-mark="1">æ”¯æŒç¨‹åºåŒ–çš„é”™è¯¯å¤„ç†ï¼ˆæ ¹æ®é”™è¯¯ç±»å‹åšä¸åŒå¤„ç†ï¼‰</li>
                    <li data-doubao-translate-traverse-mark="1">æä¾›ä¸°å¯Œçš„é”™è¯¯è°ƒè¯•ä¿¡æ¯</li>
                    <li data-doubao-translate-traverse-mark="1">å®ç°ç‰¹å®šçš„é”™è¯¯è¡Œä¸ºï¼ˆé‡è¯•ã€é™çº§ç­‰ï¼‰</li>
                </ul>

                <h3 data-doubao-translate-traverse-mark="1">4.2 å®ç° error æ¥å£</h3>
                <p data-doubao-translate-traverse-mark="1">ä»»ä½•ç±»å‹åªéœ€å®ç° <code>Error() string</code> æ–¹æ³•å³å¯æˆä¸º errorã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">åŸºç¡€ç¤ºä¾‹ï¼šç®€å•çš„è‡ªå®šä¹‰é”™è¯¯</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import "fmt"

// ç®€å•çš„é”™è¯¯ç±»å‹
type SimpleError struct {
    Message string
}

func (e SimpleError) Error() string {
    return e.Message
}

// å¸¦é”™è¯¯ç çš„é”™è¯¯ç±»å‹
type CodedError struct {
    Code    int
    Message string
}

func (e CodedError) Error() string {
    return fmt.Sprintf("[é”™è¯¯ç  %d] %s", e.Code, e.Message)
}

func main() {
    err1 := SimpleError{Message: "å‘ç”Ÿäº†ä¸€ä¸ªç®€å•é”™è¯¯"}
    fmt.Println(err1)
    
    err2 := CodedError{Code: 1001, Message: "æ•°æ®åº“è¿æ¥å¤±è´¥"}
    fmt.Println(err2)
}

// è¾“å‡ºï¼š
// å‘ç”Ÿäº†ä¸€ä¸ªç®€å•é”™è¯¯
// [é”™è¯¯ç  1001] æ•°æ®åº“è¿æ¥å¤±è´¥
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">4.3 æºå¸¦ä¸°å¯Œä¸Šä¸‹æ–‡ä¿¡æ¯</h3>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šValidationError - éªŒè¯é”™è¯¯</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
    "strings"
)

// ValidationError è¡¨ç¤ºè¾“å…¥éªŒè¯é”™è¯¯
type ValidationError struct {
    Field       string      // å­—æ®µå
    Value       interface{} // å®é™…å€¼
    Constraint  string      // çº¦æŸæ¡ä»¶
    Message     string      // é”™è¯¯æ¶ˆæ¯
}

func (e *ValidationError) Error() string {
    return fmt.Sprintf("éªŒè¯å¤±è´¥ [%s]: %s (å€¼=%v, çº¦æŸ=%s)", 
        e.Field, e.Message, e.Value, e.Constraint)
}

// ValidationErrors è¡¨ç¤ºå¤šä¸ªéªŒè¯é”™è¯¯çš„é›†åˆ
type ValidationErrors struct {
    Errors []*ValidationError
}

func (e *ValidationErrors) Error() string {
    var messages []string
    for _, err := range e.Errors {
        messages = append(messages, err.Error())
    }
    return fmt.Sprintf("å‘ç° %d ä¸ªéªŒè¯é”™è¯¯:\n  - %s", 
        len(e.Errors), strings.Join(messages, "\n  - "))
}

// Add æ·»åŠ ä¸€ä¸ªéªŒè¯é”™è¯¯
func (e *ValidationErrors) Add(err *ValidationError) {
    e.Errors = append(e.Errors, err)
}

// HasErrors æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
func (e *ValidationErrors) HasErrors() bool {
    return len(e.Errors) &gt; 0
}

// User ç»“æ„ä½“
type User struct {
    Name     string
    Email    string
    Age      int
    Password string
}

// ValidateUser éªŒè¯ç”¨æˆ·è¾“å…¥
func ValidateUser(user User) error {
    errs := &amp;ValidationErrors{}
    
    // éªŒè¯åå­—
    if len(user.Name) &lt; 2 {
        errs.Add(&amp;ValidationError{
            Field:      "Name",
            Value:      user.Name,
            Constraint: "é•¿åº¦ &gt;= 2",
            Message:    "åå­—å¤ªçŸ­",
        })
    }
    
    // éªŒè¯é‚®ç®±
    if !strings.Contains(user.Email, "@") {
        errs.Add(&amp;ValidationError{
            Field:      "Email",
            Value:      user.Email,
            Constraint: "å¿…é¡»åŒ…å« @",
            Message:    "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®",
        })
    }
    
    // éªŒè¯å¹´é¾„
    if user.Age &lt; 0 || user.Age &gt; 150 {
        errs.Add(&amp;ValidationError{
            Field:      "Age",
            Value:      user.Age,
            Constraint: "0 &lt;= age &lt;= 150",
            Message:    "å¹´é¾„è¶…å‡ºæœ‰æ•ˆèŒƒå›´",
        })
    }
    
    // éªŒè¯å¯†ç 
    if len(user.Password) &lt; 8 {
        errs.Add(&amp;ValidationError{
            Field:      "Password",
            Value:      "***",
            Constraint: "é•¿åº¦ &gt;= 8",
            Message:    "å¯†ç å¤ªå¼±",
        })
    }
    
    if errs.HasErrors() {
        return errs
    }
    return nil
}

func main() {
    fmt.Println("=== éªŒè¯é”™è¯¯ç¤ºä¾‹ ===\n")
    
    // æ— æ•ˆçš„ç”¨æˆ·è¾“å…¥
    invalidUser := User{
        Name:     "A",
        Email:    "invalid-email",
        Age:      200,
        Password: "123",
    }
    
    err := ValidateUser(invalidUser)
    if err != nil {
        fmt.Println(err)
        
        // ç±»å‹æ–­è¨€ä»¥è®¿é—®å…·ä½“é”™è¯¯ä¿¡æ¯
        if validationErrs, ok := err.(*ValidationErrors); ok {
            fmt.Printf("\nè¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå…± %d ä¸ªï¼‰:\n", len(validationErrs.Errors))
            for i, e := range validationErrs.Errors {
                fmt.Printf("%d. å­—æ®µ: %s\n", i+1, e.Field)
                fmt.Printf("   å€¼: %v\n", e.Value)
                fmt.Printf("   çº¦æŸ: %s\n", e.Constraint)
                fmt.Printf("   æ¶ˆæ¯: %s\n\n", e.Message)
            }
        }
    }
    
    fmt.Println("\n=== æœ‰æ•ˆè¾“å…¥ç¤ºä¾‹ ===\n")
    
    validUser := User{
        Name:     "Alice",
        Email:    "alice@example.com",
        Age:      25,
        Password: "securePassword123",
    }
    
    err = ValidateUser(validUser)
    if err == nil {
        fmt.Println("âœ“ ç”¨æˆ·éªŒè¯é€šè¿‡")
    }
}

// è¾“å‡ºï¼š
// === éªŒè¯é”™è¯¯ç¤ºä¾‹ ===
//
// å‘ç° 4 ä¸ªéªŒè¯é”™è¯¯:
//   - éªŒè¯å¤±è´¥ [Name]: åå­—å¤ªçŸ­ (å€¼=A, çº¦æŸ=é•¿åº¦ &gt;= 2)
//   - éªŒè¯å¤±è´¥ [Email]: é‚®ç®±æ ¼å¼ä¸æ­£ç¡® (å€¼=invalid-email, çº¦æŸ=å¿…é¡»åŒ…å« @)
//   - éªŒè¯å¤±è´¥ [Age]: å¹´é¾„è¶…å‡ºæœ‰æ•ˆèŒƒå›´ (å€¼=200, çº¦æŸ=0 &lt;= age &lt;= 150)
//   - éªŒè¯å¤±è´¥ [Password]: å¯†ç å¤ªå¼± (å€¼=***, çº¦æŸ=é•¿åº¦ &gt;= 8)
//
// è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå…± 4 ä¸ªï¼‰:
// 1. å­—æ®µ: Name
//    å€¼: A
//    çº¦æŸ: é•¿åº¦ &gt;= 2
//    æ¶ˆæ¯: åå­—å¤ªçŸ­
//
// 2. å­—æ®µ: Email
//    å€¼: invalid-email
//    çº¦æŸ: å¿…é¡»åŒ…å« @
//    æ¶ˆæ¯: é‚®ç®±æ ¼å¼ä¸æ­£ç¡®
// ...
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">4.4 å®ç°è‡ªå®šä¹‰ Is å’Œ As æ–¹æ³•</h3>
                <p data-doubao-translate-traverse-mark="1">é€šè¿‡å®ç° <code>Is(error) bool</code> å’Œ <code>As(interface{}) bool</code> æ–¹æ³•ï¼Œå¯ä»¥è‡ªå®šä¹‰é”™è¯¯çš„æ¯”è¾ƒå’Œç±»å‹è½¬æ¢è¡Œä¸ºã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šå®ç°è‡ªå®šä¹‰ Is/As</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

// å®šä¹‰é”™è¯¯ç±»åˆ«
var (
    ErrRetryable    = errors.New("retryable error")
    ErrNotRetryable = errors.New("not retryable error")
)

// NetworkError ç½‘ç»œé”™è¯¯
type NetworkError struct {
    StatusCode int
    Temporary  bool
    Message    string
}

func (e *NetworkError) Error() string {
    if e.Temporary {
        return fmt.Sprintf("ä¸´æ—¶ç½‘ç»œé”™è¯¯ [HTTP %d]: %s", e.StatusCode, e.Message)
    }
    return fmt.Sprintf("æ°¸ä¹…ç½‘ç»œé”™è¯¯ [HTTP %d]: %s", e.StatusCode, e.Message)
}

// Is æ–¹æ³•ï¼šè‡ªå®šä¹‰é”™è¯¯åŒ¹é…é€»è¾‘
func (e *NetworkError) Is(target error) bool {
    // æ‰€æœ‰ä¸´æ—¶é”™è¯¯åŒ¹é… ErrRetryable
    if target == ErrRetryable &amp;&amp; e.Temporary {
        return true
    }
    
    // æ‰€æœ‰éä¸´æ—¶é”™è¯¯åŒ¹é… ErrNotRetryable
    if target == ErrNotRetryable &amp;&amp; !e.Temporary {
        return true
    }
    
    // 5xx é”™è¯¯ä¹Ÿè¢«è§†ä¸ºå¯é‡è¯•
    if target == ErrRetryable &amp;&amp; e.StatusCode &gt;= 500 &amp;&amp; e.StatusCode &lt; 600 {
        return true
    }
    
    return false
}

// DatabaseError æ•°æ®åº“é”™è¯¯
type DatabaseError struct {
    Query      string
    SQLState   string
    ErrCode    int
    InnerError error
}

func (e *DatabaseError) Error() string {
    return fmt.Sprintf("æ•°æ®åº“é”™è¯¯ [SQLState=%s, Code=%d]: %v", 
        e.SQLState, e.ErrCode, e.InnerError)
}

// Unwrap æ–¹æ³•ï¼šæ”¯æŒé”™è¯¯é“¾
func (e *DatabaseError) Unwrap() error {
    return e.InnerError
}

// As æ–¹æ³•ï¼šè‡ªå®šä¹‰ç±»å‹è½¬æ¢
func (e *DatabaseError) As(target interface{}) bool {
    // å¦‚æœç›®æ ‡æ˜¯ *NetworkErrorï¼Œä¸”æ•°æ®åº“é”™è¯¯æ˜¯è¿æ¥é—®é¢˜
    if ne, ok := target.(**NetworkError); ok &amp;&amp; e.ErrCode == 2003 {
        *ne = &amp;NetworkError{
            StatusCode: 503,
            Temporary:  true,
            Message:    "æ•°æ®åº“è¿æ¥å¤±è´¥",
        }
        return true
    }
    return false
}

func main() {
    fmt.Println("=== è‡ªå®šä¹‰ Is æ–¹æ³•ç¤ºä¾‹ ===\n")
    
    // ä¸´æ—¶ç½‘ç»œé”™è¯¯ï¼ˆ429 Too Many Requestsï¼‰
    err1 := &amp;NetworkError{
        StatusCode: 429,
        Temporary:  true,
        Message:    "è¯·æ±‚è¿‡äºé¢‘ç¹",
    }
    
    fmt.Printf("é”™è¯¯: %v\n", err1)
    if errors.Is(err1, ErrRetryable) {
        fmt.Println("  âœ“ è¿™æ˜¯ä¸€ä¸ªå¯é‡è¯•çš„é”™è¯¯")
    }
    
    // æ°¸ä¹…ç½‘ç»œé”™è¯¯ï¼ˆ400 Bad Requestï¼‰
    err2 := &amp;NetworkError{
        StatusCode: 400,
        Temporary:  false,
        Message:    "è¯·æ±‚å‚æ•°é”™è¯¯",
    }
    
    fmt.Printf("\né”™è¯¯: %v\n", err2)
    if errors.Is(err2, ErrNotRetryable) {
        fmt.Println("  âœ“ è¿™æ˜¯ä¸€ä¸ªä¸å¯é‡è¯•çš„é”™è¯¯")
    }
    
    // æœåŠ¡å™¨é”™è¯¯ï¼ˆ500ï¼‰ä¹Ÿè¢«è§†ä¸ºå¯é‡è¯•
    err3 := &amp;NetworkError{
        StatusCode: 500,
        Temporary:  false, // è™½ç„¶æ ‡è®°ä¸º false
        Message:    "å†…éƒ¨æœåŠ¡å™¨é”™è¯¯",
    }
    
    fmt.Printf("\né”™è¯¯: %v\n", err3)
    if errors.Is(err3, ErrRetryable) {
        fmt.Println("  âœ“ 5xx é”™è¯¯ä¹Ÿè¢«è§†ä¸ºå¯é‡è¯•")
    }
    
    fmt.Println("\n=== è‡ªå®šä¹‰ As æ–¹æ³•ç¤ºä¾‹ ===\n")
    
    // æ•°æ®åº“è¿æ¥é”™è¯¯
    dbErr := &amp;DatabaseError{
        Query:    "SELECT * FROM users",
        SQLState: "08S01",
        ErrCode:  2003,
        InnerError: errors.New("Can't connect to MySQL server"),
    }
    
    fmt.Printf("é”™è¯¯: %v\n", dbErr)
    
    // å°è¯•å°†æ•°æ®åº“é”™è¯¯è½¬æ¢ä¸ºç½‘ç»œé”™è¯¯
    var netErr *NetworkError
    if errors.As(dbErr, &amp;netErr) {
        fmt.Println("  âœ“ æˆåŠŸè½¬æ¢ä¸ºç½‘ç»œé”™è¯¯ï¼ˆé€šè¿‡è‡ªå®šä¹‰ As æ–¹æ³•ï¼‰")
        fmt.Printf("  - çŠ¶æ€ç : %d\n", netErr.StatusCode)
        fmt.Printf("  - æ˜¯å¦ä¸´æ—¶: %v\n", netErr.Temporary)
        fmt.Printf("  - æ¶ˆæ¯: %s\n", netErr.Message)
    }
}

// è¾“å‡ºï¼š
// === è‡ªå®šä¹‰ Is æ–¹æ³•ç¤ºä¾‹ ===
//
// é”™è¯¯: ä¸´æ—¶ç½‘ç»œé”™è¯¯ [HTTP 429]: è¯·æ±‚è¿‡äºé¢‘ç¹
//   âœ“ è¿™æ˜¯ä¸€ä¸ªå¯é‡è¯•çš„é”™è¯¯
//
// é”™è¯¯: æ°¸ä¹…ç½‘ç»œé”™è¯¯ [HTTP 400]: è¯·æ±‚å‚æ•°é”™è¯¯
//   âœ“ è¿™æ˜¯ä¸€ä¸ªä¸å¯é‡è¯•çš„é”™è¯¯
//
// é”™è¯¯: ä¸´æ—¶ç½‘ç»œé”™è¯¯ [HTTP 500]: å†…éƒ¨æœåŠ¡å™¨é”™è¯¯
//   âœ“ 5xx é”™è¯¯ä¹Ÿè¢«è§†ä¸ºå¯é‡è¯•
//
// === è‡ªå®šä¹‰ As æ–¹æ³•ç¤ºä¾‹ ===
//
// é”™è¯¯: æ•°æ®åº“é”™è¯¯ [SQLState=08S01, Code=2003]: Can't connect to MySQL server
//   âœ“ æˆåŠŸè½¬æ¢ä¸ºç½‘ç»œé”™è¯¯ï¼ˆé€šè¿‡è‡ªå®šä¹‰ As æ–¹æ³•ï¼‰
//   - çŠ¶æ€ç : 503
//   - æ˜¯å¦ä¸´æ—¶: true
//   - æ¶ˆæ¯: æ•°æ®åº“è¿æ¥å¤±è´¥
</code></pre>

                <div class="success-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">ğŸ’¡ è®¾è®¡å»ºè®®ï¼š</strong>
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1">è‡ªå®šä¹‰é”™è¯¯ç±»å‹åº”è¯¥æºå¸¦è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä»¥ä¾¿è°ƒè¯•</li>
                        <li data-doubao-translate-traverse-mark="1">å®ç° <code>Is()</code> æ–¹æ³•å¯ä»¥æ”¯æŒè¯­ä¹‰åŒ–çš„é”™è¯¯åˆ†ç±»ï¼ˆå¦‚"å¯é‡è¯•"ã€"ä¸´æ—¶"ï¼‰</li>
                        <li data-doubao-translate-traverse-mark="1">å®ç° <code>As()</code> æ–¹æ³•å¯ä»¥æ”¯æŒé”™è¯¯ç±»å‹ä¹‹é—´çš„è½¬æ¢</li>
                        <li data-doubao-translate-traverse-mark="1">ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶å™¨ <code>(*T)</code> è€Œä¸æ˜¯å€¼æ¥æ”¶å™¨ <code>(T)</code></li>
                    </ul>
                </div>
            </section>

            <!-- ç¬¬äº”ç« ï¼šé”™è¯¯å¤„ç†æ¨¡å¼ -->
            <section id="chapter5" class="section" data-doubao-translate-traverse-mark="1">
                <h2 data-doubao-translate-traverse-mark="1">ç¬¬äº”ç« ï¼šé”™è¯¯å¤„ç†æ¨¡å¼</h2>

                <p data-doubao-translate-traverse-mark="1">åœ¨ Go ç¤¾åŒºä¸­ï¼Œå½¢æˆäº†ä¸‰ç§ä¸»è¦çš„é”™è¯¯å¤„ç†æ¨¡å¼ã€‚æ¯ç§æ¨¡å¼éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯å’Œæƒè¡¡ã€‚</p>

                <h3 data-doubao-translate-traverse-mark="1">5.1 å“¨å…µé”™è¯¯ï¼ˆSentinel Errorsï¼‰</h3>
                <p data-doubao-translate-traverse-mark="1">å“¨å…µé”™è¯¯æ˜¯é¢„å®šä¹‰çš„åŒ…çº§åˆ«å˜é‡ï¼Œä½¿ç”¨ <code>errors.New</code> æˆ– <code>fmt.Errorf</code> åˆ›å»ºã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šå“¨å…µé”™è¯¯æ¨¡å¼</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
    "io"
)

// å®šä¹‰å“¨å…µé”™è¯¯
var (
    ErrNotFound         = errors.New("resource not found")
    ErrUnauthorized     = errors.New("unauthorized access")
    ErrInvalidInput     = errors.New("invalid input")
    ErrDatabaseDown     = errors.New("database is down")
)

// UserService ç”¨æˆ·æœåŠ¡
type UserService struct {
    users map[int]string
}

func NewUserService() *UserService {
    return &amp;UserService{
        users: map[int]string{
            1: "Alice",
            2: "Bob",
        },
    }
}

func (s *UserService) GetUser(id int) (string, error) {
    user, exists := s.users[id]
    if !exists {
        return "", ErrNotFound
    }
    return user, nil
}

func (s *UserService) DeleteUser(id int, hasPermission bool) error {
    if !hasPermission {
        return ErrUnauthorized
    }
    
    if _, exists := s.users[id]; !exists {
        return ErrNotFound
    }
    
    delete(s.users, id)
    return nil
}

func main() {
    fmt.Println("=== å“¨å…µé”™è¯¯æ¨¡å¼ç¤ºä¾‹ ===\n")
    
    service := NewUserService()
    
    // ç¤ºä¾‹1ï¼šæŸ¥æ‰¾å­˜åœ¨çš„ç”¨æˆ·
    user, err := service.GetUser(1)
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
    } else {
        fmt.Printf("âœ“ æ‰¾åˆ°ç”¨æˆ·: %s\n", user)
    }
    
    // ç¤ºä¾‹2ï¼šæŸ¥æ‰¾ä¸å­˜åœ¨çš„ç”¨æˆ·
    _, err = service.GetUser(999)
    if err != nil {
        if err == ErrNotFound {
            fmt.Println("âœ— ç”¨æˆ·ä¸å­˜åœ¨ï¼ˆé€šè¿‡ == æ¯”è¾ƒï¼‰")
        }
        
        if errors.Is(err, ErrNotFound) {
            fmt.Println("âœ— ç”¨æˆ·ä¸å­˜åœ¨ï¼ˆé€šè¿‡ errors.Isï¼‰")
        }
    }
    
    // ç¤ºä¾‹3ï¼šæƒé™é”™è¯¯
    err = service.DeleteUser(1, false)
    if err != nil {
        switch err {
        case ErrUnauthorized:
            fmt.Println("âœ— æƒé™ä¸è¶³")
        case ErrNotFound:
            fmt.Println("âœ— ç”¨æˆ·ä¸å­˜åœ¨")
        default:
            fmt.Printf("âœ— æœªçŸ¥é”™è¯¯: %v\n", err)
        }
    }
    
    // ç¤ºä¾‹4ï¼šæ ‡å‡†åº“ä¸­çš„å“¨å…µé”™è¯¯
    fmt.Println("\n=== æ ‡å‡†åº“å“¨å…µé”™è¯¯ ===\n")
    
    // io.EOF
    data := []byte("hello")
    buffer := make([]byte, 10)
    n, err := io.ReadFull(bytes.NewReader(data), buffer)
    if err != nil {
        if errors.Is(err, io.EOF) {
            fmt.Printf("âœ— é‡åˆ° EOF (è¯»å–äº† %d å­—èŠ‚)\n", n)
        } else if errors.Is(err, io.ErrUnexpectedEOF) {
            fmt.Printf("âœ— æ„å¤–çš„ EOF (è¯»å–äº† %d å­—èŠ‚)\n", n)
        }
    }
}

// è¾“å‡ºï¼š
// === å“¨å…µé”™è¯¯æ¨¡å¼ç¤ºä¾‹ ===
//
// âœ“ æ‰¾åˆ°ç”¨æˆ·: Alice
// âœ— ç”¨æˆ·ä¸å­˜åœ¨ï¼ˆé€šè¿‡ == æ¯”è¾ƒï¼‰
// âœ— ç”¨æˆ·ä¸å­˜åœ¨ï¼ˆé€šè¿‡ errors.Isï¼‰
// âœ— æƒé™ä¸è¶³
//
// === æ ‡å‡†åº“å“¨å…µé”™è¯¯ ===
//
// âœ— æ„å¤–çš„ EOF (è¯»å–äº† 5 å­—èŠ‚)
</code></pre>

                <div class="feature-grid" data-doubao-translate-traverse-mark="1">
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">âœ… ä¼˜ç‚¹</h4>
                        <ul data-doubao-translate-traverse-mark="1">
                            <li data-doubao-translate-traverse-mark="1">ç®€å•ç›´è§‚ï¼Œæ˜“äºç†è§£</li>
                            <li data-doubao-translate-traverse-mark="1">å¯ä»¥ä½¿ç”¨ == æˆ– errors.Is æ¯”è¾ƒ</li>
                            <li data-doubao-translate-traverse-mark="1">é€‚åˆè¡¨ç¤ºç®€å•çš„çŠ¶æ€</li>
                        </ul>
                    </div>
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">âŒ ç¼ºç‚¹</h4>
                        <ul data-doubao-translate-traverse-mark="1">
                            <li data-doubao-translate-traverse-mark="1">åˆ›å»ºåŒ…ä¹‹é—´çš„ä¾èµ–</li>
                            <li data-doubao-translate-traverse-mark="1">æ— æ³•æºå¸¦é¢å¤–ä¸Šä¸‹æ–‡</li>
                            <li data-doubao-translate-traverse-mark="1">æˆä¸ºå…¬å…± API çš„ä¸€éƒ¨åˆ†</li>
                        </ul>
                    </div>
                </div>

                <h3 data-doubao-translate-traverse-mark="1">5.2 é”™è¯¯ç±»å‹ï¼ˆError Typesï¼‰</h3>
                <p data-doubao-translate-traverse-mark="1">é”™è¯¯ç±»å‹æ˜¯å®ç°äº† error æ¥å£çš„è‡ªå®šä¹‰ç±»å‹ï¼Œå¯ä»¥æºå¸¦ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šé”™è¯¯ç±»å‹æ¨¡å¼</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

// PathError æ–‡ä»¶è·¯å¾„é”™è¯¯
type PathError struct {
    Op   string // æ“ä½œåç§°
    Path string // æ–‡ä»¶è·¯å¾„
    Err  error  // åº•å±‚é”™è¯¯
}

func (e *PathError) Error() string {
    return fmt.Sprintf("%s %s: %v", e.Op, e.Path, e.Err)
}

func (e *PathError) Unwrap() error {
    return e.Err
}

// QueryError æ•°æ®åº“æŸ¥è¯¢é”™è¯¯
type QueryError struct {
    Query    string
    Args     []interface{}
    Err      error
    Duration int64 // æŸ¥è¯¢è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰
}

func (e *QueryError) Error() string {
    return fmt.Sprintf("æŸ¥è¯¢å¤±è´¥ (è€—æ—¶ %dms): %v\nSQL: %s", 
        e.Duration, e.Err, e.Query)
}

func (e *QueryError) Unwrap() error {
    return e.Err
}

// æ–‡ä»¶æ“ä½œ
func ReadConfig(path string) error {
    // æ¨¡æ‹Ÿè¯»å–å¤±è´¥
    return &amp;PathError{
        Op:   "open",
        Path: path,
        Err:  errors.New("permission denied"),
    }
}

// æ•°æ®åº“æŸ¥è¯¢
func QueryUsers(minAge int) error {
    // æ¨¡æ‹ŸæŸ¥è¯¢å¤±è´¥
    return &amp;QueryError{
        Query:    "SELECT * FROM users WHERE age &gt;= ?",
        Args:     []interface{}{minAge},
        Err:      errors.New("connection refused"),
        Duration: 150,
    }
}

func main() {
    fmt.Println("=== é”™è¯¯ç±»å‹æ¨¡å¼ç¤ºä¾‹ ===\n")
    
    // ç¤ºä¾‹1ï¼šæ–‡ä»¶è·¯å¾„é”™è¯¯
    err := ReadConfig("/etc/app/config.yaml")
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        // ç±»å‹æ–­è¨€è·å–è¯¦ç»†ä¿¡æ¯
        var pathErr *PathError
        if errors.As(err, &amp;pathErr) {
            fmt.Println("\nè¯¦ç»†ä¿¡æ¯ï¼š")
            fmt.Printf("  - æ“ä½œ: %s\n", pathErr.Op)
            fmt.Printf("  - è·¯å¾„: %s\n", pathErr.Path)
            fmt.Printf("  - åŸå› : %v\n", pathErr.Err)
        }
    }
    
    // ç¤ºä¾‹2ï¼šæ•°æ®åº“æŸ¥è¯¢é”™è¯¯
    fmt.Println("\n")
    err = QueryUsers(18)
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        var queryErr *QueryError
        if errors.As(err, &amp;queryErr) {
            fmt.Println("\nè¯¦ç»†ä¿¡æ¯ï¼š")
            fmt.Printf("  - SQL: %s\n", queryErr.Query)
            fmt.Printf("  - å‚æ•°: %v\n", queryErr.Args)
            fmt.Printf("  - è€—æ—¶: %dms\n", queryErr.Duration)
            fmt.Printf("  - åŸå› : %v\n", queryErr.Err)
        }
    }
    
    // ç¤ºä¾‹3ï¼šæ ‡å‡†åº“ä¸­çš„é”™è¯¯ç±»å‹
    fmt.Println("\n=== æ ‡å‡†åº“é”™è¯¯ç±»å‹ ===\n")
    
    import "os"
    _, err = os.Open("/nonexistent")
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        // os.PathError
        var osPathErr *os.PathError
        if errors.As(err, &amp;osPathErr) {
            fmt.Println("\nè¯¦ç»†ä¿¡æ¯ï¼š")
            fmt.Printf("  - æ“ä½œ: %s\n", osPathErr.Op)
            fmt.Printf("  - è·¯å¾„: %s\n", osPathErr.Path)
            fmt.Printf("  - é”™è¯¯: %v\n", osPathErr.Err)
        }
    }
}

// è¾“å‡ºï¼š
// === é”™è¯¯ç±»å‹æ¨¡å¼ç¤ºä¾‹ ===
//
// é”™è¯¯: open /etc/app/config.yaml: permission denied
//
// è¯¦ç»†ä¿¡æ¯ï¼š
//   - æ“ä½œ: open
//   - è·¯å¾„: /etc/app/config.yaml
//   - åŸå› : permission denied
//
//
// é”™è¯¯: æŸ¥è¯¢å¤±è´¥ (è€—æ—¶ 150ms): connection refused
// SQL: SELECT * FROM users WHERE age &gt;= ?
//
// è¯¦ç»†ä¿¡æ¯ï¼š
//   - SQL: SELECT * FROM users WHERE age &gt;= ?
//   - å‚æ•°: [18]
//   - è€—æ—¶: 150ms
//   - åŸå› : connection refused
</code></pre>

                <div class="feature-grid" data-doubao-translate-traverse-mark="1">
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">âœ… ä¼˜ç‚¹</h4>
                        <ul data-doubao-translate-traverse-mark="1">
                            <li data-doubao-translate-traverse-mark="1">å¯ä»¥æºå¸¦ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
                            <li data-doubao-translate-traverse-mark="1">æ”¯æŒç±»å‹æ–­è¨€å’Œ errors.As</li>
                            <li data-doubao-translate-traverse-mark="1">çµæ´»æ€§é«˜ï¼Œå¯æ‰©å±•</li>
                        </ul>
                    </div>
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">âŒ ç¼ºç‚¹</h4>
                        <li data-doubao-translate-traverse-mark="1">éœ€è¦å¯¼å‡ºç±»å‹å®šä¹‰</li>
                            <li data-doubao-translate-traverse-mark="1">è°ƒç”¨è€…éœ€è¦äº†è§£å…·ä½“ç±»å‹</li>
                            <li data-doubao-translate-traverse-mark="1">å¯èƒ½å¯¼è‡´ç´§è€¦åˆ</li>
                        
                    </div>
                </div>

                <h3 data-doubao-translate-traverse-mark="1">5.3 ä¸é€æ˜é”™è¯¯ï¼ˆOpaque Errorsï¼‰</h3>
                <p data-doubao-translate-traverse-mark="1">ä¸é€æ˜é”™è¯¯æ¨¡å¼ä¸æš´éœ²é”™è¯¯çš„å†…éƒ¨ç»†èŠ‚ï¼Œåªæä¾›è¡Œä¸ºåˆ¤æ–­æ–¹æ³•ã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šä¸é€æ˜é”™è¯¯æ¨¡å¼</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "fmt"
    "time"
)

// å®šä¹‰é”™è¯¯è¡Œä¸ºæ¥å£
type TemporaryError interface {
    error
    Temporary() bool
}

type TimeoutError interface {
    error
    Timeout() bool
}

type RetryableError interface {
    error
    Retryable() bool
}

// networkError å†…éƒ¨é”™è¯¯ç±»å‹ï¼ˆæœªå¯¼å‡ºï¼‰
type networkError struct {
    msg       string
    temporary bool
    timeout   bool
}

func (e *networkError) Error() string {
    return e.msg
}

func (e *networkError) Temporary() bool {
    return e.temporary
}

func (e *networkError) Timeout() bool {
    return e.timeout
}

// å…¬å…±å‡½æ•°è¿”å› error æ¥å£
func Connect(host string) error {
    // æ¨¡æ‹Ÿè¿æ¥è¶…æ—¶
    return &amp;networkError{
        msg:       fmt.Sprintf("è¿æ¥ %s è¶…æ—¶", host),
        temporary: true,
        timeout:   true,
    }
}

func SendRequest(url string) error {
    // æ¨¡æ‹Ÿä¸´æ—¶é”™è¯¯
    return &amp;networkError{
        msg:       fmt.Sprintf("å‘é€è¯·æ±‚åˆ° %s å¤±è´¥", url),
        temporary: true,
        timeout:   false,
    }
}

// é‡è¯•é€»è¾‘
func RetryOperation(operation func() error, maxRetries int) error {
    var err error
    for i := 0; i &lt; maxRetries; i++ {
        err = operation()
        if err == nil {
            return nil
        }
        
        // åªæœ‰ä¸´æ—¶é”™è¯¯æ‰é‡è¯•
        if temp, ok := err.(TemporaryError); ok &amp;&amp; temp.Temporary() {
            fmt.Printf("  å°è¯• %d/%d å¤±è´¥ (ä¸´æ—¶é”™è¯¯): %v\n", i+1, maxRetries, err)
            time.Sleep(time.Millisecond * 100)
            continue
        }
        
        // éä¸´æ—¶é”™è¯¯ï¼Œç›´æ¥è¿”å›
        fmt.Printf("  é‡åˆ°æ°¸ä¹…é”™è¯¯ï¼Œåœæ­¢é‡è¯•: %v\n", err)
        return err
    }
    return fmt.Errorf("è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•° (%d): %w", maxRetries, err)
}

func main() {
    fmt.Println("=== ä¸é€æ˜é”™è¯¯æ¨¡å¼ç¤ºä¾‹ ===\n")
    
    // ç¤ºä¾‹1ï¼šè¿æ¥è¶…æ—¶ï¼ˆä¸´æ—¶é”™è¯¯ï¼‰
    err := Connect("example.com:8080")
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        // é€šè¿‡è¡Œä¸ºæ¥å£åˆ¤æ–­é”™è¯¯ç‰¹æ€§
        if temp, ok := err.(TemporaryError); ok {
            fmt.Printf("  æ˜¯å¦ä¸´æ—¶é”™è¯¯: %v\n", temp.Temporary())
        }
        
        if timeout, ok := err.(TimeoutError); ok {
            fmt.Printf("  æ˜¯å¦è¶…æ—¶: %v\n", timeout.Timeout())
        }
    }
    
    // ç¤ºä¾‹2ï¼šä½¿ç”¨é‡è¯•é€»è¾‘
    fmt.Println("\n=== é‡è¯•é€»è¾‘ç¤ºä¾‹ ===\n")
    
    attemptCount := 0
    err = RetryOperation(func() error {
        attemptCount++
        if attemptCount &lt; 3 {
            return SendRequest("https://api.example.com")
        }
        return nil // ç¬¬3æ¬¡æˆåŠŸ
    }, 5)
    
    if err != nil {
        fmt.Printf("âœ— æ“ä½œæœ€ç»ˆå¤±è´¥: %v\n", err)
    } else {
        fmt.Printf("âœ“ æ“ä½œæˆåŠŸï¼ˆå°è¯•äº† %d æ¬¡ï¼‰\n", attemptCount)
    }
    
    // ç¤ºä¾‹3ï¼šæ ‡å‡†åº“ä¸­çš„ä¸é€æ˜é”™è¯¯
    fmt.Println("\n=== æ ‡å‡†åº“ç¤ºä¾‹ ===\n")
    
    import "net"
    _, err = net.Dial("tcp", "invalid-host:9999")
    if err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
        
        // net.Error æ¥å£
        if netErr, ok := err.(net.Error); ok {
            fmt.Printf("  æ˜¯å¦ä¸´æ—¶é”™è¯¯: %v\n", netErr.Temporary())
            fmt.Printf("  æ˜¯å¦è¶…æ—¶: %v\n", netErr.Timeout())
        }
    }
}

// è¾“å‡ºï¼š
// === ä¸é€æ˜é”™è¯¯æ¨¡å¼ç¤ºä¾‹ ===
//
// é”™è¯¯: è¿æ¥ example.com:8080 è¶…æ—¶
//   æ˜¯å¦ä¸´æ—¶é”™è¯¯: true
//   æ˜¯å¦è¶…æ—¶: true
//
// === é‡è¯•é€»è¾‘ç¤ºä¾‹ ===
//
//   å°è¯• 1/5 å¤±è´¥ (ä¸´æ—¶é”™è¯¯): å‘é€è¯·æ±‚åˆ° https://api.example.com å¤±è´¥
//   å°è¯• 2/5 å¤±è´¥ (ä¸´æ—¶é”™è¯¯): å‘é€è¯·æ±‚åˆ° https://api.example.com å¤±è´¥
// âœ“ æ“ä½œæˆåŠŸï¼ˆå°è¯•äº† 3 æ¬¡ï¼‰
</code></pre>

                <div class="feature-grid" data-doubao-translate-traverse-mark="1">
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">âœ… ä¼˜ç‚¹</h4>
                        <ul data-doubao-translate-traverse-mark="1">
                            <li data-doubao-translate-traverse-mark="1">æœ€å¤§ç¨‹åº¦è§£è€¦ï¼Œä¸æš´éœ²å†…éƒ¨å®ç°</li>
                            <li data-doubao-translate-traverse-mark="1">è°ƒç”¨è€…åªå…³å¿ƒè¡Œä¸ºï¼Œä¸å…³å¿ƒç±»å‹</li>
                            <li data-doubao-translate-traverse-mark="1">æ˜“äºä¿®æ”¹å†…éƒ¨å®ç°</li>
                        </ul>
                    </div>
                    <div class="feature-card" data-doubao-translate-traverse-mark="1">
                        <h4 data-doubao-translate-traverse-mark="1">âŒ ç¼ºç‚¹</h4>
                        <ul data-doubao-translate-traverse-mark="1">
                            <li data-doubao-translate-traverse-mark="1">éœ€è¦å®šä¹‰é¢å¤–çš„æ¥å£</li>
                            <li data-doubao-translate-traverse-mark="1">å¯èƒ½è¿‡åº¦è®¾è®¡</li>
                            <li data-doubao-translate-traverse-mark="1">è°ƒè¯•æ—¶ç¼ºå°‘å…·ä½“ä¿¡æ¯</li>
                        </ul>
                    </div>
                </div>

                <h3 data-doubao-translate-traverse-mark="1">5.4 ä¸‰ç§æ¨¡å¼å¯¹æ¯”ä¸é€‰æ‹©æŒ‡å—</h3>

                <table class="comparison-table" data-doubao-translate-traverse-mark="1">
                    <thead data-doubao-translate-traverse-mark="1">
                        <tr data-doubao-translate-traverse-mark="1">
                            <th data-doubao-translate-traverse-mark="1">ç»´åº¦</th>
                            <th data-doubao-translate-traverse-mark="1">å“¨å…µé”™è¯¯</th>
                            <th data-doubao-translate-traverse-mark="1">é”™è¯¯ç±»å‹</th>
                            <th data-doubao-translate-traverse-mark="1">ä¸é€æ˜é”™è¯¯</th>
                        </tr>
                    </thead>
                    <tbody data-doubao-translate-traverse-mark="1">
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">å¤æ‚åº¦</td>
                            <td data-doubao-translate-traverse-mark="1">â­ ç®€å•</td>
                            <td data-doubao-translate-traverse-mark="1">â­â­ ä¸­ç­‰</td>
                            <td data-doubao-translate-traverse-mark="1">â­â­â­ è¾ƒé«˜</td>
                        </tr>
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">ä¸Šä¸‹æ–‡ä¿¡æ¯</td>
                            <td data-doubao-translate-traverse-mark="1">âŒ æ— </td>
                            <td data-doubao-translate-traverse-mark="1">âœ… ä¸°å¯Œ</td>
                            <td data-doubao-translate-traverse-mark="1">âš ï¸ æœ‰é™</td>
                        </tr>
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">è€¦åˆåº¦</td>
                            <td data-doubao-translate-traverse-mark="1">âŒ é«˜</td>
                            <td data-doubao-translate-traverse-mark="1">âš ï¸ ä¸­ç­‰</td>
                            <td data-doubao-translate-traverse-mark="1">âœ… ä½</td>
                        </tr>
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">å¯æ‰©å±•æ€§</td>
                            <td data-doubao-translate-traverse-mark="1">âŒ å·®</td>
                            <td data-doubao-translate-traverse-mark="1">âœ… å¥½</td>
                            <td data-doubao-translate-traverse-mark="1">âœ… ä¼˜ç§€</td>
                        </tr>
                        <tr data-doubao-translate-traverse-mark="1">
                            <td data-doubao-translate-traverse-mark="1">é€‚ç”¨åœºæ™¯</td>
                            <td data-doubao-translate-traverse-mark="1">ç®€å•çŠ¶æ€æ ‡è¯†</td>
                            <td data-doubao-translate-traverse-mark="1">éœ€è¦è¯¦ç»†ä¸Šä¸‹æ–‡</td>
                            <td data-doubao-translate-traverse-mark="1">åº“å’Œæ¡†æ¶å¼€å‘</td>
                        </tr>
                    </tbody>
                </table>

                <div class="success-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">ğŸ’¡ é€‰æ‹©å»ºè®®ï¼š</strong>
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1"><strong>å“¨å…µé”™è¯¯</strong>ï¼šé€‚åˆåŒ…å†…éƒ¨ä½¿ç”¨ï¼Œè¡¨ç¤ºç®€å•çš„çŠ¶æ€ï¼ˆå¦‚ io.EOFï¼‰</li>
                        <li data-doubao-translate-traverse-mark="1"><strong>é”™è¯¯ç±»å‹</strong>ï¼šåº”ç”¨å±‚ä»£ç çš„é¦–é€‰ï¼Œéœ€è¦æºå¸¦è¯¦ç»†è°ƒè¯•ä¿¡æ¯</li>
                        <li data-doubao-translate-traverse-mark="1"><strong>ä¸é€æ˜é”™è¯¯</strong>ï¼šè®¾è®¡å…¬å…± API æ—¶çš„æœ€ä½³é€‰æ‹©ï¼Œæœ€å¤§åŒ–è§£è€¦</li>
                        <li data-doubao-translate-traverse-mark="1">å®é™…é¡¹ç›®ä¸­å¯ä»¥æ··åˆä½¿ç”¨ï¼Œæ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©</li>
                    </ul>
                </div>
            </section>

            <!-- ç¬¬å…­ç« ï¼šGo 1.13+ æ–°ç‰¹æ€§æ·±åº¦è§£æ -->
            <section id="chapter6" class="section" data-doubao-translate-traverse-mark="1">
                <h2 data-doubao-translate-traverse-mark="1">ç¬¬å…­ç« ï¼šGo 1.13+ æ–°ç‰¹æ€§æ·±åº¦è§£æ</h2>
                <span class="tag tag-go113" data-doubao-translate-traverse-mark="1">Go 1.13+</span>

                <h3 data-doubao-translate-traverse-mark="1">6.1 errors åŒ…çš„æ¼”è¿›å†å²</h3>

                <div class="highlight-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">æ¼”è¿›æ—¶é—´çº¿ï¼š</strong>
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1"><strong>Go 1.0 (2012)</strong>: æœ€åˆçš„ errors åŒ…ï¼Œåªæœ‰ <code>errors.New</code></li>
                        <li data-doubao-translate-traverse-mark="1"><strong>Go 1.13 (2019)</strong>: å¼•å…¥é”™è¯¯åŒ…è£…ã€<code>Is</code>ã€<code>As</code>ã€<code>Unwrap</code></li>
                        <li data-doubao-translate-traverse-mark="1"><strong>Go 1.20 (2023)</strong>: æ–°å¢ <code>errors.Join</code> æ”¯æŒå¤šé”™è¯¯åˆå¹¶</li>
                    </ul>
                </div>

                <h3 data-doubao-translate-traverse-mark="1">6.2 Go 1.13 æ ¸å¿ƒæ”¹è¿›</h3>

                <h4 data-doubao-translate-traverse-mark="1">æ”¹è¿›1ï¼šfmt.Errorf æ”¯æŒ %w</h4>
                <p data-doubao-translate-traverse-mark="1">åœ¨ Go 1.13 ä¹‹å‰ï¼Œ<code>fmt.Errorf</code> åªèƒ½åˆ›å»ºæ–°çš„é”™è¯¯å­—ç¬¦ä¸²ï¼Œæ— æ³•ä¿ç•™åŸå§‹é”™è¯¯ã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">Go 1.13 å‰åå¯¹æ¯”</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

var ErrDatabase = errors.New("database error")

func main() {
    // Go 1.13 ä¹‹å‰çš„æ–¹å¼
    err1 := fmt.Errorf("operation failed: %v", ErrDatabase)
    fmt.Printf("ä½¿ç”¨ %%v:\n")
    fmt.Printf("  é”™è¯¯: %v\n", err1)
    fmt.Printf("  Is(ErrDatabase): %v\n", errors.Is(err1, ErrDatabase)) // false
    fmt.Printf("  Unwrap: %v\n\n", errors.Unwrap(err1)) // nil
    
    // Go 1.13 æ–°æ–¹å¼
    err2 := fmt.Errorf("operation failed: %w", ErrDatabase)
    fmt.Printf("ä½¿ç”¨ %%w:\n")
    fmt.Printf("  é”™è¯¯: %v\n", err2)
    fmt.Printf("  Is(ErrDatabase): %v\n", errors.Is(err2, ErrDatabase)) // true
    fmt.Printf("  Unwrap: %v\n", errors.Unwrap(err2)) // ErrDatabase
}

// è¾“å‡ºï¼š
// ä½¿ç”¨ %v:
//   é”™è¯¯: operation failed: database error
//   Is(ErrDatabase): false
//   Unwrap: <nil>
//
// ä½¿ç”¨ %w:
//   é”™è¯¯: operation failed: database error
//   Is(ErrDatabase): true
//   Unwrap: database error
</nil></code></pre>

                <h4 data-doubao-translate-traverse-mark="1">æ”¹è¿›2ï¼šerrors.Is çš„å®ç°åŸç†</h4>

                <div class="code-header" data-doubao-translate-traverse-mark="1">errors.Is æºç åˆ†æï¼ˆç®€åŒ–ç‰ˆï¼‰</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">// Go æºç : src/errors/wrap.go

func Is(err, target error) bool {
    if target == nil {
        return err == target
    }
    
    isComparable := reflectlite.TypeOf(target).Comparable()
    
    for {
        // 1. ç›´æ¥æ¯”è¾ƒ
        if isComparable &amp;&amp; err == target {
            return true
        }
        
        // 2. å¦‚æœ err å®ç°äº† Is(error) bool æ–¹æ³•
        if x, ok := err.(interface{ Is(error) bool }); ok &amp;&amp; x.Is(target) {
            return true
        }
        
        // 3. å‘ä¸‹éå†é”™è¯¯é“¾
        if err = Unwrap(err); err == nil {
            return false
        }
    }
}

// Unwrap æå–åº•å±‚é”™è¯¯
func Unwrap(err error) error {
    u, ok := err.(interface {
        Unwrap() error
    })
    if !ok {
        return nil
    }
    return u.Unwrap()
}
</code></pre>

                <div class="highlight-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">å…³é”®è®¾è®¡ç‚¹ï¼š</strong>
                    <ol data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1"><code>errors.Is</code> ä¼šéå†æ•´ä¸ªé”™è¯¯é“¾ï¼Œä¸åªæ˜¯æ¯”è¾ƒé¡¶å±‚é”™è¯¯</li>
                        <li data-doubao-translate-traverse-mark="1">æ”¯æŒè‡ªå®šä¹‰ <code>Is(error) bool</code> æ–¹æ³•æ¥å®šåˆ¶æ¯”è¾ƒé€»è¾‘</li>
                        <li data-doubao-translate-traverse-mark="1">ä½¿ç”¨ <code>Unwrap()</code> æ–¹æ³•å‘ä¸‹éå†é”™è¯¯é“¾</li>
                        <li data-doubao-translate-traverse-mark="1">å…¼å®¹ä¸å®ç° <code>Unwrap()</code> çš„ä¼ ç»Ÿé”™è¯¯</li>
                    </ol>
                </div>

                <h4 data-doubao-translate-traverse-mark="1">æ”¹è¿›3ï¼šerrors.As çš„å®ç°åŸç†</h4>

                <div class="code-header" data-doubao-translate-traverse-mark="1">errors.As æºç åˆ†æï¼ˆç®€åŒ–ç‰ˆï¼‰</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">// Go æºç : src/errors/wrap.go

func As(err error, target interface{}) bool {
    if target == nil {
        panic("errors: target cannot be nil")
    }
    
    val := reflectlite.ValueOf(target)
    typ := val.Type()
    
    // target å¿…é¡»æ˜¯é nil çš„æŒ‡é’ˆ
    if typ.Kind() != reflectlite.Ptr || val.IsNil() {
        panic("errors: target must be a non-nil pointer")
    }
    
    targetType := typ.Elem()
    
    for {
        // 1. å°è¯•ç±»å‹æ–­è¨€
        if reflectlite.TypeOf(err).AssignableTo(targetType) {
            val.Elem().Set(reflectlite.ValueOf(err))
            return true
        }
        
        // 2. å¦‚æœ err å®ç°äº† As(interface{}) bool æ–¹æ³•
        if x, ok := err.(interface{ As(interface{}) bool }); ok &amp;&amp; x.As(target) {
            return true
        }
        
        // 3. å‘ä¸‹éå†é”™è¯¯é“¾
        if err = Unwrap(err); err == nil {
            return false
        }
    }
}
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">6.3 Go 1.20 æ–°ç‰¹æ€§ï¼šerrors.Join</h3>
                <span class="tag tag-go113" data-doubao-translate-traverse-mark="1">Go 1.20+</span>

                <p data-doubao-translate-traverse-mark="1">Go 1.20 å¼•å…¥äº† <code>errors.Join</code> å‡½æ•°ï¼Œç”¨äºåˆå¹¶å¤šä¸ªé”™è¯¯ä¸ºä¸€ä¸ªã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šerrors.Join çš„ä½¿ç”¨</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

func ValidateRequest(username, password, email string) error {
    var errs []error
    
    if username == "" {
        errs = append(errs, errors.New("ç”¨æˆ·åä¸èƒ½ä¸ºç©º"))
    }
    
    if len(password) &lt; 8 {
        errs = append(errs, errors.New("å¯†ç é•¿åº¦å¿…é¡»è‡³å°‘8ä½"))
    }
    
    if email == "" {
        errs = append(errs, errors.New("é‚®ç®±ä¸èƒ½ä¸ºç©º"))
    } else if !strings.Contains(email, "@") {
        errs = append(errs, errors.New("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"))
    }
    
    if len(errs) &gt; 0 {
        return errors.Join(errs...)
    }
    return nil
}

func main() {
    fmt.Println("=== errors.Join ç¤ºä¾‹ ===\n")
    
    // ç¤ºä¾‹1ï¼šå¤šä¸ªéªŒè¯é”™è¯¯
    err := ValidateRequest("", "123", "invalid")
    if err != nil {
        fmt.Printf("éªŒè¯å¤±è´¥:\n%v\n", err)
    }
    
    // ç¤ºä¾‹2ï¼šæ£€æµ‹åˆå¹¶åçš„é”™è¯¯
    fmt.Println("\n=== é”™è¯¯æ£€æµ‹ ===\n")
    
    err1 := errors.New("é”™è¯¯1")
    err2 := errors.New("é”™è¯¯2")
    err3 := errors.New("é”™è¯¯3")
    
    combinedErr := errors.Join(err1, err2, err3)
    fmt.Printf("åˆå¹¶é”™è¯¯: %v\n\n", combinedErr)
    
    // errors.Is å¯ä»¥æ£€æµ‹ä»»ä½•ä¸€ä¸ªå­é”™è¯¯
    if errors.Is(combinedErr, err2) {
        fmt.Println("âœ“ åˆå¹¶é”™è¯¯ä¸­åŒ…å« err2")
    }
    
    // ç¤ºä¾‹3ï¼šå®é™…åº”ç”¨åœºæ™¯
    fmt.Println("\n=== æ‰¹é‡æ“ä½œç¤ºä¾‹ ===\n")
    
    files := []string{"file1.txt", "file2.txt", "file3.txt"}
    var deleteErrors []error
    
    for _, file := range files {
        // æ¨¡æ‹Ÿåˆ é™¤æ–‡ä»¶
        if err := deleteFile(file); err != nil {
            deleteErrors = append(deleteErrors, fmt.Errorf("åˆ é™¤ %s å¤±è´¥: %w", file, err))
        }
    }
    
    if len(deleteErrors) &gt; 0 {
        finalErr := errors.Join(deleteErrors...)
        fmt.Printf("æ‰¹é‡åˆ é™¤å¤±è´¥:\n%v\n", finalErr)
    }
}

func deleteFile(name string) error {
    // æ¨¡æ‹Ÿåˆ é™¤å¤±è´¥
    return errors.New("æ–‡ä»¶ä¸å­˜åœ¨")
}

// è¾“å‡ºï¼š
// === errors.Join ç¤ºä¾‹ ===
//
// éªŒè¯å¤±è´¥:
// ç”¨æˆ·åä¸èƒ½ä¸ºç©º
// å¯†ç é•¿åº¦å¿…é¡»è‡³å°‘8ä½
// é‚®ç®±æ ¼å¼ä¸æ­£ç¡®
//
// === é”™è¯¯æ£€æµ‹ ===
//
// åˆå¹¶é”™è¯¯: é”™è¯¯1
// é”™è¯¯2
// é”™è¯¯3
//
// âœ“ åˆå¹¶é”™è¯¯ä¸­åŒ…å« err2
//
// === æ‰¹é‡æ“ä½œç¤ºä¾‹ ===
//
// æ‰¹é‡åˆ é™¤å¤±è´¥:
// åˆ é™¤ file1.txt å¤±è´¥: æ–‡ä»¶ä¸å­˜åœ¨
// åˆ é™¤ file2.txt å¤±è´¥: æ–‡ä»¶ä¸å­˜åœ¨
// åˆ é™¤ file3.txt å¤±è´¥: æ–‡ä»¶ä¸å­˜åœ¨
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">6.4 å‘åå…¼å®¹æ€§è€ƒè™‘</h3>

                <div class="success-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">âœ… Go é”™è¯¯å¤„ç†çš„å‘åå…¼å®¹æ€§ï¼š</strong>
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1">æ—§ä»£ç æ— éœ€ä¿®æ”¹å³å¯è¿è¡Œï¼Œ<code>errors.Is/As</code> å¯¹ä¼ ç»Ÿé”™è¯¯ä¹Ÿæœ‰æ•ˆ</li>
                        <li data-doubao-translate-traverse-mark="1">ä¸å®ç° <code>Unwrap()</code> çš„é”™è¯¯ä»å¯æ­£å¸¸ä½¿ç”¨</li>
                        <li data-doubao-translate-traverse-mark="1"><code>%v</code> å’Œ <code>%w</code> å¯ä»¥å…±å­˜ï¼Œæ ¹æ®éœ€æ±‚é€‰æ‹©</li>
                        <li data-doubao-translate-traverse-mark="1">æ ‡å‡†åº“å·²å…¨é¢æ›´æ–°ï¼Œæ”¯æŒæ–°çš„é”™è¯¯å¤„ç†æ–¹å¼</li>
                    </ul>
                </div>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å…¼å®¹æ€§ç¤ºä¾‹</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

// ä¼ ç»Ÿé”™è¯¯ï¼ˆGo 1.13 ä¹‹å‰ï¼‰
type OldError struct {
    msg string
}

func (e OldError) Error() string {
    return e.msg
}

// æ–°é”™è¯¯ï¼ˆGo 1.13+ï¼‰
type NewError struct {
    msg string
    err error
}

func (e *NewError) Error() string {
    return fmt.Sprintf("%s: %v", e.msg, e.err)
}

func (e *NewError) Unwrap() error {
    return e.err
}

func main() {
    oldErr := OldError{msg: "æ—§å¼é”™è¯¯"}
    newErr := &amp;NewError{msg: "æ–°å¼é”™è¯¯", err: oldErr}
    
    // errors.Is å¯¹ä¸¤ç§é”™è¯¯éƒ½æœ‰æ•ˆ
    fmt.Printf("errors.Is(newErr, oldErr): %v\n", errors.Is(newErr, oldErr))
    
    // errors.As å¯¹ä¸¤ç§é”™è¯¯éƒ½æœ‰æ•ˆ
    var target OldError
    fmt.Printf("errors.As(newErr, &amp;target): %v\n", errors.As(newErr, &amp;target))
}
</code></pre>
            </section>

            <!-- ç¬¬ä¸ƒç« ï¼šé”™è¯¯å¤„ç†æœ€ä½³å®è·µ -->
            <section id="chapter7" class="section" data-doubao-translate-traverse-mark="1">
                <h2 data-doubao-translate-traverse-mark="1">ç¬¬ä¸ƒç« ï¼šé”™è¯¯å¤„ç†æœ€ä½³å®è·µ</h2>
                <span class="tag tag-best-practice" data-doubao-translate-traverse-mark="1">Best Practice</span>

                <h3 data-doubao-translate-traverse-mark="1">7.1 é”™è¯¯ä¿¡æ¯çš„ç¼–å†™è§„èŒƒ</h3>

                <div class="success-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">âœ… å¥½çš„é”™è¯¯ä¿¡æ¯ï¼š</strong>
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1">å°å†™å¼€å¤´ï¼ˆé™¤éæ˜¯ä¸“æœ‰åè¯æˆ–é¦–å­—æ¯ç¼©å†™ï¼‰</li>
                        <li data-doubao-translate-traverse-mark="1">ä¸ä»¥æ ‡ç‚¹ç¬¦å·ç»“å°¾</li>
                        <li data-doubao-translate-traverse-mark="1">åŒ…å«ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå‡½æ•°åã€å‚æ•°ã€æ“ä½œï¼‰</li>
                        <li data-doubao-translate-traverse-mark="1">æè¿°å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè€Œä¸æ˜¯"ä»€ä¹ˆæ²¡å‘ç”Ÿ"</li>
                        <li data-doubao-translate-traverse-mark="1">é¿å…ä½¿ç”¨"failed to"ã€"error"ç­‰å†—ä½™è¯æ±‡</li>
                    </ul>
                </div>

                <div class="code-header" data-doubao-translate-traverse-mark="1">é”™è¯¯ä¿¡æ¯ç¤ºä¾‹å¯¹æ¯”</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

// âŒ ä¸å¥½çš„é”™è¯¯ä¿¡æ¯
func badExamples() {
    // 1. å¤§å†™å¼€å¤´
    err1 := errors.New("Failed to connect to database")
    
    // 2. ä»¥æ ‡ç‚¹ç»“å°¾
    err2 := errors.New("connection refused.")
    
    // 3. ç¼ºå°‘ä¸Šä¸‹æ–‡
    err3 := errors.New("invalid input")
    
    // 4. å†—ä½™è¯æ±‡
    err4 := errors.New("error: failed to parse JSON")
    
    // 5. æè¿°"æ²¡å‘ç”Ÿä»€ä¹ˆ"
    err5 := errors.New("file not opened")
    
    _ = err1
    _ = err2
    _ = err3
    _ = err4
    _ = err5
}

// âœ… å¥½çš„é”™è¯¯ä¿¡æ¯
func goodExamples() {
    // 1. å°å†™å¼€å¤´ï¼ŒåŒ…å«ä¸Šä¸‹æ–‡
    err1 := fmt.Errorf("connect to database %s:%d", "localhost", 3306)
    
    // 2. ä¸ä»¥æ ‡ç‚¹ç»“å°¾
    err2 := errors.New("connection refused")
    
    // 3. ä¸°å¯Œçš„ä¸Šä¸‹æ–‡
    err3 := fmt.Errorf("parse user input: invalid age %d (must be between 0 and 150)", -5)
    
    // 4. ç®€æ´æ˜äº†
    err4 := fmt.Errorf("parse JSON: unexpected end of input")
    
    // 5. æè¿°"å‘ç”Ÿäº†ä»€ä¹ˆ"
    err5 := fmt.Errorf("open file %s: permission denied", "/etc/passwd")
    
    _ = err1
    _ = err2
    _ = err3
    _ = err4
    _ = err5
}

func main() {
    fmt.Println("=== é”™è¯¯ä¿¡æ¯è§„èŒƒç¤ºä¾‹ ===\n")
    
    // ç¤ºä¾‹ï¼šæ„å»ºå±‚æ¬¡åŒ–çš„é”™è¯¯ä¿¡æ¯
    if err := processFile("/tmp/data.json"); err != nil {
        fmt.Printf("é”™è¯¯: %v\n", err)
    }
}

func processFile(path string) error {
    if err := readFile(path); err != nil {
        return fmt.Errorf("process file: %w", err)
    }
    return nil
}

func readFile(path string) error {
    if err := openFile(path); err != nil {
        return fmt.Errorf("read %s: %w", path, err)
    }
    return nil
}

func openFile(path string) error {
    // æ¨¡æ‹Ÿæ‰“å¼€æ–‡ä»¶å¤±è´¥
    return fmt.Errorf("open %s: no such file or directory", path)
}

// è¾“å‡ºï¼š
// === é”™è¯¯ä¿¡æ¯è§„èŒƒç¤ºä¾‹ ===
//
// é”™è¯¯: process file: read /tmp/data.json: open /tmp/data.json: no such file or directory
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">7.2 é”™è¯¯ä¼ æ’­ç­–ç•¥</h3>

                <p data-doubao-translate-traverse-mark="1">åœ¨å¤šå±‚å‡½æ•°è°ƒç”¨ä¸­ï¼Œå¦‚ä½•ä¼ æ’­é”™è¯¯æ˜¯ä¸€ä¸ªé‡è¦çš„è®¾è®¡å†³ç­–ã€‚</p>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šé”™è¯¯ä¼ æ’­æ¨¡å¼</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
    "log"
)

var ErrNotFound = errors.New("not found")

// æ¨¡å¼1ï¼šç›´æ¥è¿”å›åŸå§‹é”™è¯¯ï¼ˆé€‚åˆç®€å•åœºæ™¯ï¼‰
func findUserDirect(id int) (string, error) {
    if id &lt;= 0 {
        return "", ErrNotFound
    }
    return fmt.Sprintf("User_%d", id), nil
}

// æ¨¡å¼2ï¼šæ·»åŠ ä¸Šä¸‹æ–‡ååŒ…è£…é”™è¯¯ï¼ˆæ¨èï¼‰
func findUserWithContext(id int) (string, error) {
    if id &lt;= 0 {
        return "", fmt.Errorf("find user %d: %w", id, ErrNotFound)
    }
    return fmt.Sprintf("User_%d", id), nil
}

// æ¨¡å¼3ï¼šåªè®°å½•æ—¥å¿—ï¼Œä¸è¿”å›é”™è¯¯ï¼ˆç‰¹æ®Šåœºæ™¯ï¼‰
func findUserLogOnly(id int) string {
    if id &lt;= 0 {
        log.Printf("è­¦å‘Š: æ— æ•ˆçš„ç”¨æˆ·ID %d", id)
        return "Guest"
    }
    return fmt.Sprintf("User_%d", id)
}

// æ¨¡å¼4ï¼šå¤„ç†é”™è¯¯åè¿”å›ä¸åŒçš„é”™è¯¯ï¼ˆé”™è¯¯è½¬æ¢ï¼‰
func findUserTransform(id int) (string, error) {
    if id &lt;= 0 {
        // å°†å†…éƒ¨é”™è¯¯è½¬æ¢ä¸ºæ›´åˆé€‚çš„å…¬å…±é”™è¯¯
        return "", fmt.Errorf("invalid user id: %d", id)
    }
    return fmt.Sprintf("User_%d", id), nil
}

// å¤šå±‚è°ƒç”¨ç¤ºä¾‹
func getUserProfile(id int) error {
    user, err := findUserWithContext(id)
    if err != nil {
        // åœ¨é¡¶å±‚æ·»åŠ ä¸šåŠ¡ä¸Šä¸‹æ–‡
        return fmt.Errorf("get user profile: %w", err)
    }
    
    fmt.Printf("ç”¨æˆ·èµ„æ–™: %s\n", user)
    return nil
}

func main() {
    fmt.Println("=== é”™è¯¯ä¼ æ’­ç­–ç•¥ç¤ºä¾‹ ===\n")
    
    // æµ‹è¯•ä¸åŒæ¨¡å¼
    fmt.Println("æ¨¡å¼1ï¼šç›´æ¥è¿”å›")
    if _, err := findUserDirect(0); err != nil {
        fmt.Printf("  é”™è¯¯: %v\n", err)
        fmt.Printf("  Is(ErrNotFound): %v\n", errors.Is(err, ErrNotFound))
    }
    
    fmt.Println("\næ¨¡å¼2ï¼šæ·»åŠ ä¸Šä¸‹æ–‡")
    if _, err := findUserWithContext(0); err != nil {
        fmt.Printf("  é”™è¯¯: %v\n", err)
        fmt.Printf("  Is(ErrNotFound): %v\n", errors.Is(err, ErrNotFound))
    }
    
    fmt.Println("\næ¨¡å¼3ï¼šåªè®°å½•æ—¥å¿—")
    user := findUserLogOnly(0)
    fmt.Printf("  è¿”å›: %s\n", user)
    
    fmt.Println("\næ¨¡å¼4ï¼šé”™è¯¯è½¬æ¢")
    if _, err := findUserTransform(0); err != nil {
        fmt.Printf("  é”™è¯¯: %v\n", err)
        fmt.Printf("  Is(ErrNotFound): %v\n", errors.Is(err, ErrNotFound))
    }
    
    fmt.Println("\nå¤šå±‚è°ƒç”¨:")
    if err := getUserProfile(0); err != nil {
        fmt.Printf("  æœ€ç»ˆé”™è¯¯: %v\n", err)
        fmt.Printf("  Is(ErrNotFound): %v\n", errors.Is(err, ErrNotFound))
    }
}

// è¾“å‡ºï¼š
// === é”™è¯¯ä¼ æ’­ç­–ç•¥ç¤ºä¾‹ ===
//
// æ¨¡å¼1ï¼šç›´æ¥è¿”å›
//   é”™è¯¯: not found
//   Is(ErrNotFound): true
//
// æ¨¡å¼2ï¼šæ·»åŠ ä¸Šä¸‹æ–‡
//   é”™è¯¯: find user 0: not found
//   Is(ErrNotFound): true
//
// æ¨¡å¼3ï¼šåªè®°å½•æ—¥å¿—
//   è¿”å›: Guest
//
// æ¨¡å¼4ï¼šé”™è¯¯è½¬æ¢
//   é”™è¯¯: invalid user id: 0
//   Is(ErrNotFound): false
//
// å¤šå±‚è°ƒç”¨:
//   æœ€ç»ˆé”™è¯¯: get user profile: find user 0: not found
//   Is(ErrNotFound): true
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">7.3 æ—¥å¿—è®°å½•çš„æ—¶æœº</h3>

                <div class="warning-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">âš ï¸ é‡è¦åŸåˆ™ï¼š</strong> é”™è¯¯åº”è¯¥è¢«å¤„ç†ä¸€æ¬¡ï¼Œé¿å…é‡å¤è®°å½•ã€‚é€šå¸¸åœ¨ä»¥ä¸‹ä½ç½®è®°å½•æ—¥å¿—ï¼š
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1">åº”ç”¨ç¨‹åºçš„è¾¹ç•Œï¼ˆHTTP handlerã€main å‡½æ•°ï¼‰</li>
                        <li data-doubao-translate-traverse-mark="1">é”™è¯¯æ¢å¤ç‚¹ï¼ˆä»é”™è¯¯ä¸­æ¢å¤ç»§ç»­æ‰§è¡Œï¼‰</li>
                        <li data-doubao-translate-traverse-mark="1">åå° goroutineï¼ˆæ— æ³•å‘ä¸Šä¼ æ’­é”™è¯¯ï¼‰</li>
                    </ul>
                </div>

                <div class="code-header" data-doubao-translate-traverse-mark="1">å®Œæ•´ç¤ºä¾‹ï¼šæ—¥å¿—è®°å½•æœ€ä½³å®è·µ</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
    "log"
)

// âŒ ä¸å¥½çš„åšæ³•ï¼šæ¯å±‚éƒ½è®°å½•
func badLogging() {
    err := level1Bad()
    if err != nil {
        log.Printf("main: é”™è¯¯ %v", err) // æ—¥å¿—4
    }
}

func level1Bad() error {
    err := level2Bad()
    if err != nil {
        log.Printf("level1: é”™è¯¯ %v", err) // æ—¥å¿—3
        return err
    }
    return nil
}

func level2Bad() error {
    err := level3Bad()
    if err != nil {
        log.Printf("level2: é”™è¯¯ %v", err) // æ—¥å¿—2
        return err
    }
    return nil
}

func level3Bad() error {
    err := errors.New("database connection failed")
    log.Printf("level3: é”™è¯¯ %v", err) // æ—¥å¿—1
    return err
}

// âœ… å¥½çš„åšæ³•ï¼šåªåœ¨é¡¶å±‚è®°å½•
func goodLogging() {
    err := level1Good()
    if err != nil {
        // åªåœ¨é¡¶å±‚è®°å½•ä¸€æ¬¡å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
        log.Printf("æ“ä½œå¤±è´¥: %v", err)
    }
}

func level1Good() error {
    err := level2Good()
    if err != nil {
        return fmt.Errorf("level1: %w", err)
    }
    return nil
}

func level2Good() error {
    err := level3Good()
    if err != nil {
        return fmt.Errorf("level2: %w", err)
    }
    return nil
}

func level3Good() error {
    err := errors.New("database connection failed")
    return fmt.Errorf("level3: %w", err)
}

// HTTP å¤„ç†å™¨ç¤ºä¾‹
type UserHandler struct{}

func (h *UserHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    err := h.getUser(r.Context(), 123)
    if err != nil {
        // åœ¨è¾¹ç•Œå¤„è®°å½•æ—¥å¿—
        log.Printf("è¯·æ±‚å¤±è´¥ [method=%s, path=%s]: %v", 
            r.Method, r.URL.Path, err)
        
        http.Error(w, "Internal Server Error", 500)
        return
    }
    
    w.Write([]byte("success"))
}

func (h *UserHandler) getUser(ctx context.Context, id int) error {
    // ä¸šåŠ¡é€»è¾‘å±‚ä¸è®°å½•æ—¥å¿—ï¼Œåªè¿”å›é”™è¯¯
    user, err := h.fetchFromDB(id)
    if err != nil {
        return fmt.Errorf("get user %d: %w", id, err)
    }
    _ = user
    return nil
}

func (h *UserHandler) fetchFromDB(id int) (string, error) {
    // æ•°æ®åº“å±‚ä¹Ÿä¸è®°å½•æ—¥å¿—
    return "", errors.New("connection timeout")
}

// åå°ä»»åŠ¡ç¤ºä¾‹ï¼ˆéœ€è¦è®°å½•æ—¥å¿—ï¼‰
func backgroundWorker() {
    for {
        if err := processJob(); err != nil {
            // åå° goroutine æ— æ³•å‘ä¸Šä¼ æ’­é”™è¯¯ï¼Œå¿…é¡»è®°å½•
            log.Printf("åå°ä»»åŠ¡å¤±è´¥: %v", err)
        }
        time.Sleep(time.Second)
    }
}

func processJob() error {
    return errors.New("job processing failed")
}

func main() {
    fmt.Println("=== ä¸å¥½çš„åšæ³•ï¼ˆæ¯å±‚éƒ½è®°å½•ï¼‰===")
    badLogging()
    // è¾“å‡ºï¼š
    // level3: é”™è¯¯ database connection failed
    // level2: é”™è¯¯ database connection failed
    // level1: é”™è¯¯ database connection failed
    // main: é”™è¯¯ database connection failed
    
    fmt.Println("\n=== å¥½çš„åšæ³•ï¼ˆåªåœ¨é¡¶å±‚è®°å½•ï¼‰===")
    goodLogging()
    // è¾“å‡ºï¼š
    // æ“ä½œå¤±è´¥: level1: level2: level3: database connection failed
}
</code></pre>

                <h3 data-doubao-translate-traverse-mark="1">7.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>

                <div class="highlight-box" data-doubao-translate-traverse-mark="1">
                    <strong data-doubao-translate-traverse-mark="1">æ€§èƒ½è€ƒè™‘ï¼š</strong>
                    <ul data-doubao-translate-traverse-mark="1">
                        <li data-doubao-translate-traverse-mark="1">é”™è¯¯åˆ›å»ºå¼€é”€å¾ˆå°ï¼ˆåªæ˜¯ç»“æ„ä½“åˆ†é…ï¼‰</li>
                        <li data-doubao-translate-traverse-mark="1">é¿å…åœ¨çƒ­è·¯å¾„ä¸Šé¢‘ç¹åˆ›å»ºé”™è¯¯</li>
                        <li data-doubao-translate-traverse-mark="1">å“¨å…µé”™è¯¯å¯ä»¥é¢„åˆ†é…å’Œé‡ç”¨</li>
                        <li data-doubao-translate-traverse-mark="1">é”™è¯¯é“¾éå†æœ‰ä¸€å®šå¼€é”€ï¼Œä½†é€šå¸¸å¯å¿½ç•¥</li>
                    </ul>
                </div>

                <div class="code-header" data-doubao-translate-traverse-mark="1">æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹</div>
                <pre data-doubao-translate-traverse-mark="1"><code class="language-go">package main

import (
    "errors"
    "fmt"
)

// âŒ ä¸å¥½ï¼šæ¯æ¬¡éƒ½åˆ›å»ºæ–°é”™è¯¯
func validateBad(value int) error {
    if value &lt; 0 {
        return errors.New("value cannot be negative") // æ¯æ¬¡éƒ½åˆ†é…
    }
    return nil
}

// âœ… å¥½ï¼šé‡ç”¨å“¨å…µé”™è¯¯
var ErrNegativeValue = errors.New("value cannot be negative")

func validateGood(value int) error {
    if value &lt; 0 {
        return ErrNegativeValue // é‡ç”¨é¢„åˆ†é…çš„é”™è¯¯
            
      <script>
        const createFloatingBall = ()=>{let a=document.createElement("style");a.textContent=`
          .fellou-floating-ball {
              position: fixed;
              bottom: 20px;
              right: 20px;
              background: #fff;
              border-radius: 50%;
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
              display: flex;
              gap: 8px;
              flex-direction: row;
              align-items: center;
              justify-content: center;
              cursor: pointer;
              transition: all 0.15s ease;
              z-index: 100000;
              width: 28px;
              height: 28px;
              text-align: center;
              border: 2px solid #f4f4f4;
          }

          .fellou-floating-ball:hover {
              width: 140px;
              border-radius: 99px;
          }

          .fellou-floating-ball svg {
              width: 16px;
              height: 16px;
          }

          .fellou-floating-ball-text {
              display: none;
              width: 0px;
              transition: width 0.3s ease;
              color: #595561;
              font-size: 12px;
              font-style: normal;
              font-weight: 400;
              line-height: 20px;
              white-space: nowrap;
              overflow: hidden;
           
          }

          .fellou-floating-ball:hover .fellou-floating-ball-text {
              display: block;
              width: 100px;
          }
      `,document.head.appendChild(a);let b=document.createElement("div");b.className="fellou-floating-ball",b.addEventListener("click",()=>{window.open("https://fellou.ai","_blank")}),b.innerHTML=`
          <svg width="16" height="16" viewBox="0 0 152 152" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.72" d="M108.71 15.909C133.671 36.8541 134.337 77.1554 110.197 105.924C86.0565 134.694 46.2518 141.036 21.2904 120.091C-3.67096 99.1459 -4.33674 58.8446 19.8034 30.0755C43.9435 1.30644 83.7482 -5.03614 108.71 15.909ZM102.282 23.5694C81.8118 6.39315 48.2407 11.7425 27.4638 36.5034C6.68694 61.2643 7.24845 95.2543 27.7183 112.431C48.1882 129.607 81.7593 124.258 102.536 99.4966C123.313 74.7357 122.752 40.7457 102.282 23.5694Z" fill="url(#paint0_linear_34_1408)"/>
              <path d="M116.986 29.3811C141.525 49.9712 143.286 88.2698 120.921 114.924C98.5561 141.577 60.5333 146.493 35.995 125.903C11.4567 105.313 9.69493 67.0139 32.06 40.3602C54.4252 13.7065 92.4479 8.79095 116.986 29.3811ZM110.558 37.0415C90.3987 20.1255 58.6488 24.2301 39.7205 46.788C20.7921 69.346 22.2632 101.326 42.4229 118.242C62.5825 135.158 94.3324 131.054 113.261 108.496C132.189 85.9377 130.718 53.9574 110.558 37.0415Z" fill="url(#paint1_linear_34_1408)"/>
              <path d="M131.544 35.0694C155.71 55.3471 155.731 95.1074 131.591 123.876C107.451 152.646 68.291 159.529 44.1249 139.251C19.9589 118.974 19.9379 79.2135 44.078 50.4444C68.2182 21.6753 107.378 14.7917 131.544 35.0694ZM125.116 42.7299C105.505 26.2745 72.5526 32.067 51.7385 56.8723C30.9244 81.6776 30.9421 115.136 50.5528 131.591C70.1636 148.046 103.116 142.254 123.931 117.449C144.745 92.6433 144.727 59.1852 125.116 42.7299Z" fill="url(#paint2_linear_34_1408)"/>
              <defs>
                  <linearGradient id="paint0_linear_34_1408" x1="108.71" y1="15.909" x2="21.2904" y2="120.091" gradientUnits="userSpaceOnUse">
                      <stop stop-color="#6401F8" stop-opacity="0.7"/>
                      <stop offset="0.465" stop-color="#FF9000" stop-opacity="0.42"/>
                      <stop offset="1" stop-color="#33B3FF" stop-opacity="0.2"/>
                  </linearGradient>
                  <linearGradient id="paint1_linear_34_1408" x1="116.986" y1="29.381" x2="35.995" y2="125.903" gradientUnits="userSpaceOnUse">
                      <stop stop-color="#6401F8" stop-opacity="0.7"/>
                      <stop offset="0.465" stop-color="#FF9000" stop-opacity="0.42"/>
                      <stop offset="1" stop-color="#33B3FF" stop-opacity="0.2"/>
                  </linearGradient>
                  <linearGradient id="paint2_linear_34_1408" x1="131.544" y1="35.0694" x2="44.1249" y2="139.251" gradientUnits="userSpaceOnUse">
                      <stop stop-color="#6401F8"/>
                      <stop offset="0.5" stop-color="#FF9000"/>
                      <stop offset="1" stop-color="#33B3FF"/>
                  </linearGradient>
              </defs>
          </svg>
      `;let c=document.createElement("div");c.className="fellou-floating-ball-text",c.textContent="powered by fellou",b.appendChild(c),document.body.appendChild(b)};
        // Call createFloatingBall when the page loads
        window.addEventListener('load', createFloatingBall);
      </script>
    
          
        
      </code></pre></section></main></div><div class="fellou-floating-ball" data-doubao-translate-traverse-mark="1">
          <svg width="16" height="16" viewBox="0 0 152 152" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.72" d="M108.71 15.909C133.671 36.8541 134.337 77.1554 110.197 105.924C86.0565 134.694 46.2518 141.036 21.2904 120.091C-3.67096 99.1459 -4.33674 58.8446 19.8034 30.0755C43.9435 1.30644 83.7482 -5.03614 108.71 15.909ZM102.282 23.5694C81.8118 6.39315 48.2407 11.7425 27.4638 36.5034C6.68694 61.2643 7.24845 95.2543 27.7183 112.431C48.1882 129.607 81.7593 124.258 102.536 99.4966C123.313 74.7357 122.752 40.7457 102.282 23.5694Z" fill="url(#paint0_linear_34_1408)"></path>
              <path d="M116.986 29.3811C141.525 49.9712 143.286 88.2698 120.921 114.924C98.5561 141.577 60.5333 146.493 35.995 125.903C11.4567 105.313 9.69493 67.0139 32.06 40.3602C54.4252 13.7065 92.4479 8.79095 116.986 29.3811ZM110.558 37.0415C90.3987 20.1255 58.6488 24.2301 39.7205 46.788C20.7921 69.346 22.2632 101.326 42.4229 118.242C62.5825 135.158 94.3324 131.054 113.261 108.496C132.189 85.9377 130.718 53.9574 110.558 37.0415Z" fill="url(#paint1_linear_34_1408)"></path>
              <path d="M131.544 35.0694C155.71 55.3471 155.731 95.1074 131.591 123.876C107.451 152.646 68.291 159.529 44.1249 139.251C19.9589 118.974 19.9379 79.2135 44.078 50.4444C68.2182 21.6753 107.378 14.7917 131.544 35.0694ZM125.116 42.7299C105.505 26.2745 72.5526 32.067 51.7385 56.8723C30.9244 81.6776 30.9421 115.136 50.5528 131.591C70.1636 148.046 103.116 142.254 123.931 117.449C144.745 92.6433 144.727 59.1852 125.116 42.7299Z" fill="url(#paint2_linear_34_1408)"></path>
              <defs>
                  <linearGradient id="paint0_linear_34_1408" x1="108.71" y1="15.909" x2="21.2904" y2="120.091" gradientUnits="userSpaceOnUse">
                      <stop stop-color="#6401F8" stop-opacity="0.7"></stop>
                      <stop offset="0.465" stop-color="#FF9000" stop-opacity="0.42"></stop>
                      <stop offset="1" stop-color="#33B3FF" stop-opacity="0.2"></stop>
                  </linearGradient>
                  <linearGradient id="paint1_linear_34_1408" x1="116.986" y1="29.381" x2="35.995" y2="125.903" gradientUnits="userSpaceOnUse">
                      <stop stop-color="#6401F8" stop-opacity="0.7"></stop>
                      <stop offset="0.465" stop-color="#FF9000" stop-opacity="0.42"></stop>
                      <stop offset="1" stop-color="#33B3FF" stop-opacity="0.2"></stop>
                  </linearGradient>
                  <linearGradient id="paint2_linear_34_1408" x1="131.544" y1="35.0694" x2="44.1249" y2="139.251" gradientUnits="userSpaceOnUse">
                      <stop stop-color="#6401F8"></stop>
                      <stop offset="0.5" stop-color="#FF9000"></stop>
                      <stop offset="1" stop-color="#33B3FF"></stop>
                  </linearGradient>
              </defs>
          </svg>
      <div class="fellou-floating-ball-text" data-doubao-translate-traverse-mark="1">powered by fellou</div></div><div id="doubao-ai-translate-image-assistant204d34ff-8c9b-4f60-b1e3-71cfbfd3da6d" data-collection-img-host-id="204d34ff-8c9b-4f60-b1e3-71cfbfd3da6d" data-doubao-translate-traverse-mark="1"></div><div data-doubao-translate-traverse-mark="1" style="width: 0px; height: 0px; position: absolute; z-index: 200000;"></div><div id="desktop_ai_web_reader-204d34ff-8c9b-4f60-b1e3-71cfbfd3da6d" flow-ext-shadow-host-selectable="true" data-doubao-translate-traverse-mark="1" style="display: block; z-index: 2147483647;"></div><doubao-ai-csui id="3dd8ad09597b47b49b77a2d1a03cb6e4" data-host-id="204d34ff-8c9b-4f60-b1e3-71cfbfd3da6d" data-doubao-translate-traverse-mark="1"></doubao-ai-csui></body></html>